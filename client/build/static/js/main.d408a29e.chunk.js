(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,t,a){e.exports=a(451)},217:function(e,t,a){},223:function(e,t,a){},225:function(e,t,a){},331:function(e,t,a){},339:function(e,t,a){},346:function(e,t,a){},348:function(e,t,a){},351:function(e,t,a){},353:function(e,t,a){},395:function(e,t,a){},397:function(e,t,a){},399:function(e,t,a){},401:function(e,t,a){},403:function(e,t,a){},405:function(e,t,a){},407:function(e,t,a){},427:function(e,t,a){},429:function(e,t,a){},431:function(e,t,a){},433:function(e,t,a){},435:function(e,t,a){},437:function(e,t,a){},439:function(e,t,a){},441:function(e,t,a){},443:function(e,t,a){},445:function(e,t,a){},447:function(e,t,a){},449:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"MakeID",function(){return qa}),a.d(n,"DisabledDate",function(){return Pa}),a.d(n,"DisabledDateBack",function(){return Aa}),a.d(n,"DisabledDateSick",function(){return Ma}),a.d(n,"GetDates",function(){return Va}),a.d(n,"GetWorkingDate",function(){return Ha}),a.d(n,"CountTotalDay",function(){return Ba});var l=a(0),r=a.n(l),o=a(12),s=a.n(o),i=(a(217),a(14)),c=a(15),u=a(18),d=a(16),m=a(17),h=a(464),p=a(466),f=a(321),E=a(20),g=a(19),y=a(197),v=a(9),b="http://ec2-18-222-196-130.us-east-2.compute.amazonaws.com:8080",D="CLEAR_FIELD",C="FETCH_USER",O="REGISTER_USER",S="DELETE_USER",w="FETCH_EDIT_USER",j="EDIT_USER",k="FETCH_LEAVE_PENDING",_="FETCH_LEAVE_APPROVE",I="FETCH_LEAVE_REJECT",R="FETCH_REQUEST_PENDING",x="DELETE_REQUEST_PENDING",L="FETCH_REQUEST_APPROVE",N="FETCH_REQUEST_REJECT",T="APPROVE_LEAVE_PENDING",F="REJECT_LEAVE_PENDING",Y="CANCEL_LEAVE_REQUEST",q="FETCH_USER_SUMMARY",P="FETCH_TYPE_LEAVE",M="LOGIN_FORM_ONCHANGE",A="RESET_PASSWORD",V="GET_PROFILE",B="EDIT_PASSWORD",H="GET_SUPERVISORS",U="CREATE_LEAVE_REQUEST",G="FETCH_LEAVE_BALANCES",W="EDIT_BALANCES",z="FETCH_USER_LOGIN",J="FETCH_PUBLIC_HOLIDAY",K={email:"",password:""};var Q={email:""};var $={loading:!0,users:[],leaves:[],balances:[{type_name:"Annual Leave",leave_remaining:12},{type_name:"Errand Leave",leave_remaining:3},{type_name:"Sick Leave",leave_remaining:30},{type_name:"Marriage Leave",leave_remaining:2},{type_name:"Other Leave",leave_remaining:2}]};var X={employee_number:"",name:"",gender:"",position:"",start_working_date:"",mobile_phone:"",email:"",password:"",role:"",supervisor_id:null};var Z={loading:!0,user:{employee_number:0,name:"",gender:"",position:"",start_working_date:"",mobile_phone:"",email:"",role:"",supervisor_id:""}};var ee={type_leave_id:null,reason:"",date_from:"",date_to:"",half_dates:[],total:0,back_on:null,contact_address:"",contact_number:"",notes:""};var te={employee_number:null,type_leave_id:null,reason:"",date_from:"",date_to:"",half_dates:[],total:0,back_on:null,contact_address:"",contact_number:"",notes:""};var ae={loading:!0,leave:{type_leave_id:null,reason:"",date_from:"",date_to:"",half_dates:[],back_on:null,contact_address:"",contact_number:""}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EDIT":case"EDITING_REQUEST":return Object(v.a)({},t.payload);default:return e}},le={loading:!0,leaves:[]};var re={loading:!0,leaves:[],leave:{reject_reason:""}};var oe={loading:!0,leaves:[]};var se={loading:!0,userSummary:[],userType:[]};var ie={loading:!0,user:[]};var ce={old_password:"",new_password:"",confirm_password:""};var ue={typeLeave:[]};var de={user:{},loading:!0};var me={supervisor:[]};var he={publicHoliday:[]};var pe=Object(g.c)({loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(v.a)({},t.payload);case D:return Object(v.a)({},K);default:return e}},resetPasswordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(v.a)({},t.payload);default:return e}},adminReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case S:case k:case _:case I:case Y:case G:case W:return Object(v.a)({},t.payload);default:return e}},registerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(v.a)({},t.payload);case D:return Object(v.a)({},X);default:return e}},editUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case j:return Object(v.a)({},t.payload);default:return e}},leaveRequestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(v.a)({},t.payload);case D:return Object(v.a)({},ee);default:return e}},adminLeaveRequestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(v.a)({},t.payload);case D:return Object(v.a)({},te);default:return e}},editRequestReducer:ne,fetchDirectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case _:case I:case T:case F:return Object(v.a)({},t.payload);default:return e}},fetchSupervisorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case _:case I:case T:case F:case"REJECT_REASON":return Object(v.a)({},t.payload);default:return e}},fetchEmployeeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:case"UPDATE_REQUEST_PENDING":case x:case L:case N:return Object(v.a)({},t.payload);default:return e}},fetchUserSummaryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(v.a)({},t.payload);default:return e}},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(v.a)({},t.payload);default:return e}},passwordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(v.a)({},t.payload);default:return e}},fetchTypeLeaveReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(v.a)({},t.payload);default:return e}},fetchUserLoginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(v.a)({},t.payload);default:return e}},AddSupervisorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(v.a)({},t.payload);default:return e}},fetchPublicHolidayReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(v.a)({},t.payload);default:return e}}}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||g.d,Ee=Object(g.e)(pe,fe(Object(g.a)(y.a))),ge=(a(223),a(225),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"message"},r.a.createElement("p",{className:"rotate"},"ERROR"),r.a.createElement("h1",{className:"error"},"404"),r.a.createElement("a",{className:"btn",href:"/"},"BACK TO HOME"))}}]),t}(l.Component)),ye=a(26),ve=a(11),be=a(465),De=a(72),Ce=a.n(De);function Oe(e){return{type:M,payload:e}}function Se(){return{type:D}}function we(e,t){return function(a){fetch("".concat(b,"/api/login"),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var n=e.body,l=e.error;if(null!==l)Ce()({title:"Sorry",text:"".concat(l),icon:"error",button:!1});else{var r=n.Token,o=n.ID,s=n.Role;"admin"===s?(localStorage.setItem("token",r),localStorage.setItem("role",s),localStorage.setItem("id",o),t("/admin"),a(Se()),Ce()({title:"Welcome",text:"Login success!",icon:"success",button:!1})):"director"===s?(localStorage.setItem("token",r),localStorage.setItem("role",s),localStorage.setItem("id",o),t("/director"),a(Se()),Ce()({title:"Welcome",text:"Login success!",icon:"success",button:!1})):"supervisor"===s?(localStorage.setItem("token",r),localStorage.setItem("role",s),localStorage.setItem("id",o),t("/supervisor"),a(Se()),Ce()({title:"Welcome",text:"Login success!",icon:"success",button:!1})):"employee"===s?(localStorage.setItem("token",r),localStorage.setItem("role",s),localStorage.setItem("id",o),t("/employee"),a(Se()),Ce()({title:"Welcome",text:"Login success!",icon:"success",button:!1})):"admin"===s&&"director"===s&&"supervisor"===s&&"employee"===s||(t("/"),a(Se()),Ce()({title:"Sorry",text:"Login failed!",icon:"error",button:!1}))}}).catch(function(e){console.error("error @submitLogin: ",e)})}}var je=a(463),ke=a(458),_e=a(23),Ie=a(461),Re=a(27),xe=je.a.Header,Le=je.a.Content,Ne=je.a.Footer,Te=ke.a.Item,Fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSumbitLogin=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form")}),a.props.submitLogin(a.props.loginForm,function(e){a.props.history.push(e)})},a.handleOnChangeLogin=function(e){var t=Object(v.a)({},a.props.loginForm,Object(ye.a)({},e.target.name,e.target.value));a.props.handleFormInput(t),a.props.form.setFieldsValue(Object(ye.a)({},e.target.name,e.target.value))},a.state={loading:!1,iconLoading:!1},a.handleOnChangeLogin=a.handleOnChangeLogin.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Login ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")&&"admin"===localStorage.getItem("role")?this.props.history.push("/admin"):localStorage.getItem("token")&&"director"===localStorage.getItem("role")?this.props.history.push("/director"):localStorage.getItem("token")&&"supervisor"===localStorage.getItem("role")?this.props.history.push("/supervisor"):localStorage.getItem("token")&&"employee"===localStorage.getItem("role")&&this.props.history.push("/employee"),this.props.form.validateFields()}},{key:"hasErrors",value:function(e){return Object.keys(e).some(function(t){return e[t]})}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldsError,n=e.getFieldError,l=e.isFieldTouched,o=l("email")&&n("email"),s=l("password")&&n("password");return r.a.createElement("div",null,r.a.createElement(je.a,{className:"App"},r.a.createElement(xe,{className:"App-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement("h1",null,r.a.createElement(_e.a,{type:"home"})," E-Leave"))),r.a.createElement(Le,{className:"container",style:{display:"flex",margin:"172px 15px ",justifyContent:"center"}},r.a.createElement("div",{style:{padding:50,background:"#fff","border-radius":7}},r.a.createElement(ke.a,{onSubmit:this.handleSumbitLogin,className:"login-form"},r.a.createElement("h1",{align:"left"},"Login to your account"),r.a.createElement(Te,{validateStatus:o?"error":"",help:o||""},t("email",{rules:[{type:"email"},{required:!0}]})(r.a.createElement(Ie.a,{type:"email",id:"email",name:"email",placeholder:"email",value:this.props.loginForm.email,onChange:this.handleOnChangeLogin,prefix:r.a.createElement(_e.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),style:{width:"100%"}}))),r.a.createElement(Te,{validateStatus:s?"error":"",help:s||""},t("password",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"password",id:"password",name:"password",placeholder:"password",value:this.props.loginForm.password,onChange:this.handleOnChangeLogin,prefix:r.a.createElement(_e.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(Te,null,r.a.createElement(Re.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:this.handleSumbitLogin,disabled:this.hasErrors(a())},"LOGIN")),r.a.createElement("h3",{align:"left"},"Forgot your password ?"),"no worries, click ",r.a.createElement(be.a,{to:"/reset-password"},"here")," ","to reset your password.",r.a.createElement(Te,null)))),r.a.createElement(Ne,{className:"Login-footer"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://www.tnis.com"},"PT. TNIS Service Indonesia")," ","\xa9 2018. All Right Reserved."))))}}]),t}(l.Component),Ye=ke.a.create()(Fe),qe=Object(E.b)(function(e){return{loginForm:e.loginReducer}},function(e){return Object(g.b)({handleFormInput:Oe,submitLogin:we},e)})(Ye);function Pe(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/admin/user/").concat(e,"/"),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:V,payload:e}}({loading:!1,user:a})),null!==n&&console.error("error not null @profileFetchData: ",n)}).catch(function(e){console.error("error @profileFetchData: ",e)})}}function Me(){return function(e){fetch("".concat(b,"/api/user/supervisor"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:H,payload:e}}({supervisor:a})),null!==n&&console.error("error not null @getSupervisors: ",n)}).catch(function(e){console.error("error @getSupervisors: ",e)})}}var Ae=a(154),Ve=a.n(Ae),Be=a(195),He=a(459),Ue=a(467),Ge=a(452),We=je.a.Header,ze=Ge.a.SubMenu,Je=Object(Ue.a)(function(e){var t=e.history;return r.a.createElement(Re.a,{onClick:function(){localStorage.clear(),t.push("/")},type:"danger",ghost:!0},"Logout")}),Ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={role:localStorage.getItem("role")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"employee"===this.state.role?r.a.createElement(We,null,r.a.createElement(Ge.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(Ge.a.Item,{key:"1"},r.a.createElement(be.a,{to:"/employee"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"home"})),"Home")),r.a.createElement(Ge.a.Item,{key:"2"},r.a.createElement(be.a,{to:"/profile"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"profile"})),"My Profile")),r.a.createElement(ze,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"user"}),"Employee")},r.a.createElement(Ge.a.Item,{key:"employee:1"},r.a.createElement(be.a,{to:"/employee/leave-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"form"})),"Form Request Leave")),r.a.createElement(Ge.a.Item,{key:"employee:2"},r.a.createElement(be.a,{to:"/employee/list-pending-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Pending Request")),r.a.createElement(Ge.a.Item,{key:"employee:3"},r.a.createElement(be.a,{to:"/employee/list-approve-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Approve Request")),r.a.createElement(Ge.a.Item,{key:"employee:4"},r.a.createElement(be.a,{to:"/employee/list-reject-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Reject Request"))),r.a.createElement(Ge.a.Item,{key:"4"},r.a.createElement(Je,null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}})):"supervisor"===this.state.role?r.a.createElement(We,null,r.a.createElement(Ge.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(Ge.a.Item,{key:"1"},r.a.createElement(be.a,{to:"/"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"home"})),"Home")),r.a.createElement(Ge.a.Item,{key:"2"},r.a.createElement(be.a,{to:"/profile"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"profile"})),"My Profile")),r.a.createElement(ze,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"user"}),"Supervisor")},r.a.createElement(Ge.a.Item,{key:"supervisor:1"},r.a.createElement(be.a,{to:"/supervisor/list-pending-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Pending Request")),r.a.createElement(Ge.a.Item,{key:"supervisor:2"},r.a.createElement(be.a,{to:"/supervisor/list-approve-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Approve Request")),r.a.createElement(Ge.a.Item,{key:"supervisor:3"},r.a.createElement(be.a,{to:"/supervisor/list-reject-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Reject Request"))),r.a.createElement(ze,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"user"}),"Employee")},r.a.createElement(Ge.a.Item,{key:"employee:1"},r.a.createElement(be.a,{to:"/employee/leave-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"form"})),"Form Request Leave")),r.a.createElement(Ge.a.Item,{key:"employee:2"},r.a.createElement(be.a,{to:"/employee/list-pending-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Pending Request")),r.a.createElement(Ge.a.Item,{key:"employee:3"},r.a.createElement(be.a,{to:"/employee/list-approve-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Approve Request")),r.a.createElement(Ge.a.Item,{key:"employee:4"},r.a.createElement(be.a,{to:"/employee/list-reject-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Reject Request"))),r.a.createElement(Ge.a.Item,{key:"10"},r.a.createElement(Je,null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}})):"director"===this.state.role?r.a.createElement(We,null,r.a.createElement(Ge.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(Ge.a.Item,{key:"1"},r.a.createElement(be.a,{to:"/"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"home"})),"Home")),r.a.createElement(Ge.a.Item,{key:"2"},r.a.createElement(be.a,{to:"/profile"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"profile"})),"My Profile")),r.a.createElement(ze,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"user"}),"Director")},r.a.createElement(Ge.a.Item,{key:"user:1"},r.a.createElement(be.a,{to:"/director/list-pending-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Pending Request")),r.a.createElement(Ge.a.Item,{key:"user:2"},r.a.createElement(be.a,{to:"/director/list-approve-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Approve Request")),r.a.createElement(Ge.a.Item,{key:"user:3"},r.a.createElement(be.a,{to:"/director/list-reject-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Reject Request"))),r.a.createElement(Ge.a.Item,{key:"3"},r.a.createElement(Je,null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}})):null}}]),t}(r.a.Component),Qe=(a(331),je.a.Footer),$e=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Qe,{className:"App-footer"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://www.tnis.com"},"PT. TNIS Service Indonesia")," \xa9 2018. All Right Reserved."))}}]),t}(r.a.Component),Xe=je.a.Content,Ze=ke.a.Item,et=Be.a.Option,tt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).editPassword=function(e,t){a.props.history.push({pathname:"/profile/"+t,state:{user:e}})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Profile-Page ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&"director"!==localStorage.getItem("role")&&(this.props.history.push("/"),window.location.href="/"):this.props.history.push("/"),this.props.profileFetchData(),this.props.getSupervisors()}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){var e,t=this,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return this.props.supervisor&&this.props.supervisor.map(function(a){return a.supervisor_id===t.props.user.supervisor_id&&(e=a.name),a}),r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Xe,{className:"container",style:{display:"flex",margin:"37px 16px 0",justifyContent:"space-around",paddingBottom:"36px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff"}},r.a.createElement("h1",null," My Profile "),r.a.createElement("div",null,r.a.createElement(ke.a,null,r.a.createElement(Ze,Object.assign({},a,{label:"Name"}),r.a.createElement(Ie.a,{type:"text",id:"name",name:"name",placeholder:"name",value:this.props.user.name})),r.a.createElement(Ze,Object.assign({},a,{label:"Email"}),r.a.createElement(Ie.a,{type:"email",id:"email",name:"email",value:this.props.user.email})),r.a.createElement(Ze,Object.assign({},a,{label:"Gender"}),r.a.createElement(Be.a,{id:"gender",name:"gender",optionFilterProp:"children",value:this.props.user.gender,onFocus:this.handleFocus,onBlur:this.handleBlur},r.a.createElement(et,{value:"male",disabled:!0},"Male"),r.a.createElement(et,{value:"female",disabled:!0},"Female"))),r.a.createElement(Ze,Object.assign({},a,{label:"Position"}),r.a.createElement(Ie.a,{type:"text",id:"position",name:"position",value:this.props.user.position})),r.a.createElement(Ze,Object.assign({},a,{label:"Start Working Date"}),r.a.createElement(He.a,{id:"start_working_date",name:"start_working_date",format:"DD-MM-YYYY",value:Ve()(this.props.user.start_working_date,"DD-MM-YYYY"),style:{width:"100%"},disabled:!0})),r.a.createElement(Ze,Object.assign({},a,{label:"Mobile Phone"}),r.a.createElement(Ie.a,{type:"text",id:"mobile_phone",name:"mobile_phone",value:this.props.user.mobile_phone})),r.a.createElement(Ze,Object.assign({},a,{label:"Role"}),r.a.createElement(Be.a,{id:"role",name:"role",optionFilterProp:"children",onFocus:this.handleFocus,onBlur:this.handleBlur,value:this.props.user.role},r.a.createElement(et,{value:"employee",disabled:!0},"Employee"),r.a.createElement(et,{value:"supervisor",disabled:!0},"Supervisor"),r.a.createElement(et,{value:"dirctor",disabled:!0},"Director"))),"employee"===this.props.user.role?r.a.createElement(Ze,Object.assign({},a,{label:"Supervisor"}),r.a.createElement(Be.a,{id:"supervisor_id",name:"supervisor_id",optionFilterProp:"children",onFocus:this.handleFocus,onBlur:this.handleBlur,value:e},this.props.supervisor.map(function(e){return r.a.createElement(et,{key:e.supervisor_id,disabled:!0},e.name)}))):"","0001-01-01T00:00:00Z"!==this.props.user.updated_at?r.a.createElement(Ze,Object.assign({},a,{label:"Updated At"}),r.a.createElement(Ie.a,{type:"text",id:"updated_at",name:"updated_at",value:Ve()(this.props.user.updated_at).tz("Asia/Jakarta").format("DD-MM-YYYY HH:mm")})):"",r.a.createElement(Ze,null,r.a.createElement(Re.a,{onClick:function(){t.editPassword(t.props.user,t.props.user.employee_number)},htmlType:"edit",type:"primary"},"Edit Password")))))),r.a.createElement($e,null)))}}]),t}(l.Component),at=ke.a.create()(tt),nt=Object(E.b)(function(e){return{loading:e.profileReducer.loading,user:e.profileReducer.user,supervisor:e.AddSupervisorReducer.supervisor}},function(e){return Object(g.b)({profileFetchData:Pe,getSupervisors:Me},e)})(at),lt=a(462);function rt(e){return function(t){t({type:A,payload:e})}}function ot(e,t){return function(a){fetch("".concat(b,"/api/user/password-reset"),{method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;null!==a?(lt.a.success(a),t("/")):lt.a.error(n)}).catch(function(e){console.error("error @resetPassword: ",e)})}}var st=je.a.Header,it=je.a.Content,ct=je.a.Footer,ut=ke.a.Item,dt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSumbitLogin=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)}),a.props.resetPassword(a.props.loginForm,function(e){a.props.history.push(e)})},a.handleOnChangeLogin=function(e){var t=Object(v.a)({},a.props.loginForm,Object(ye.a)({},e.target.name,e.target.value));a.props.handleEdit(t),a.props.form.setFieldsValue(Object(ye.a)({},e.target.name,e.target.value))},a.state={loading:!1,iconLoading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Reset-Password ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")&&"admin"===localStorage.getItem("role")?this.props.history.push("/admin"):localStorage.getItem("token")&&"director"===localStorage.getItem("role")?this.props.history.push("/director"):localStorage.getItem("token")&&"supervisor"===localStorage.getItem("role")?this.props.history.push("/supervisor"):localStorage.getItem("token")&&"employee"===localStorage.getItem("role")&&this.props.history.push("/employee"),this.props.form.validateFields()}},{key:"hasErrors",value:function(e){return Object.keys(e).some(function(t){return e[t]})}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldsError,n=e.getFieldError,l=(0,e.isFieldTouched)("email")&&n("email");return r.a.createElement("div",null,r.a.createElement(je.a,{className:"App"},r.a.createElement(st,{className:"App-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement("h1",null,r.a.createElement(_e.a,{type:"home"})," E-Leave"))),r.a.createElement(it,{className:"container",style:{display:"flex",margin:"192px 15px ",justifyContent:"center"}},r.a.createElement("div",{style:{padding:50,background:"#fff","border-radius":7}},r.a.createElement(ke.a,{onSubmit:this.handleSumbitLogin,className:"login-form"},r.a.createElement("h1",{align:"left"}," Forget Password ?"),r.a.createElement("p",{align:"left"},"Enter your e-mail address below ",r.a.createElement("br",null)," so we can send back your password."),r.a.createElement(ut,{validateStatus:l?"error":"",help:l||""},t("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0}]})(r.a.createElement(Ie.a,{type:"email",id:"email",name:"email",placeholder:"email",value:this.props.loginForm.email,onChange:this.handleOnChangeLogin,prefix:r.a.createElement(_e.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(ut,null,r.a.createElement(Re.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:this.handleSumbitLogin,disabled:this.hasErrors(a())},"FORGOT")),r.a.createElement(be.a,{to:"/"},"back!"),r.a.createElement(ut,null)))),r.a.createElement(ct,{className:"Login-footer"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://www.tnis.com"},"PT. TNIS Service Indonesia")," ","\xa9 2018. All Right Reserved."))))}}]),t}(l.Component),mt=ke.a.create()(dt),ht=Object(E.b)(function(e){return{loginForm:e.resetPasswordReducer}},function(e){return Object(g.b)({handleEdit:rt,resetPassword:ot},e)})(mt);function pt(e){return function(t){t({type:B,payload:e})}}function ft(e,t){var a=localStorage.getItem("id");return function(n){fetch("".concat(b,"/api/user/update/").concat(a),{method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;null!==a?(lt.a.success(a),t("/profile")):lt.a.error(n)}).catch(function(e){console.error("error @updateNewPassword: ",e)})}}var Et=je.a.Content,gt=ke.a.Item,yt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updatePassword=function(e){e.preventDefault(),a.props.updateNewPassword(a.props.passwordForm,function(e){a.props.history.push(e)}),a.props.form.validateFieldsAndScroll(function(e,t){e||console.log("Received values of form: ",t)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.passwordForm,Object(ye.a)({},e.target.name,e.target.value));a.props.handleEdit(t)},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var l=a.props.form;t&&t!==l.getFieldValue("password")?n("Wrong confirm password!"):n()},a.validateToNextPassword=function(e,t,n){var l=a.props.form;t&&a.state.confirmDirty&&l.validateFields(["confirm"],{force:!0}),n()},a.state={from:null,to:null,endOpen:!1,confirmDirty:!1},a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Update-Password ----------------- "),localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&"director"!==localStorage.getItem("role")&&"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}},style:{}},a={width:"100%"};return r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Et,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"411px"}},r.a.createElement("div",{style:{padding:50,paddingBottom:50,paddingTop:50,background:"#fff"}},r.a.createElement("h1",null," UPDATE PASSWORD "),r.a.createElement(ke.a,{className:"login-form"},r.a.createElement(gt,Object.assign({},t,{label:"Old Password"}),e("old password",{rules:[{required:!0},{min:7,message:"password length minimum is 7"}]})(r.a.createElement(Ie.a,{type:"password",id:"old_password",name:"old_password",placeholder:"old password",onChange:this.handleOnChange,style:a}))),r.a.createElement(gt,Object.assign({},t,{label:"New Password"}),e("password",{rules:[{required:!0},{min:7,message:"password length minimum is 7"},{validator:this.validateToNextPassword}]})(r.a.createElement(Ie.a,{type:"password",id:"new_password",name:"new_password",placeholder:"new password",onChange:this.handleOnChange,style:a}))),r.a.createElement(gt,Object.assign({},t,{label:"Confirm Password"}),e("confirm",{rules:[{required:!0},{min:7,message:"password length minimum is 7"},{validator:this.compareToFirstPassword}]})(r.a.createElement(Ie.a,{type:"password",id:"confirm_password",name:"confirm_password",placeholder:"confirm password",onChange:this.handleOnChange,style:a}))),r.a.createElement(gt,null,r.a.createElement(Re.a,{onClick:this.updatePassword,htmlType:"submit",type:"primary",style:{width:"35%"}},"Update"))))),r.a.createElement($e,null))}}]),t}(l.Component),vt=ke.a.create()(yt),bt=Object(E.b)(function(e){return{passwordForm:e.passwordReducer}},function(e){return Object(g.b)({handleEdit:pt,updateNewPassword:ft},e)})(vt),Dt=a(55),Ct=a.n(Dt),Ot=a(28),St=a.n(Ot);function wt(e){return function(t){t({type:U,payload:e})}}function jt(){return{type:D}}function kt(e,t){var a=localStorage.getItem("id");return function(n){fetch("".concat(b,"/api/employee/leave/").concat(a),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,l=e.error;null!==a?(n(jt()),t("/employee/list-pending-request"),lt.a.success("Create leave request success")):"Type request malform"===l?lt.a.error("Create failed, please check all field!"):lt.a.error(l)}).catch(function(e){console.error("error @SumbitLeave: ",e)})}}function _t(e,t){var a=localStorage.getItem("id");return function(n){fetch("".concat(b,"/api/supervisor/leave/").concat(a),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,l=e.error;null!==a?(n(jt()),t("/employee/list-pending-request"),lt.a.success("Create leave request success")):"Type request malform"===l?lt.a.error("Create failed, please check all field!"):lt.a.error(l)}).catch(function(e){console.error("error @SumbitLeaveSupervisor: ",e)})}}function It(){return function(e){fetch("".concat(b,"/api/user/type-leave/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:P,payload:e}}({typeLeave:a})),null!==n&&console.error("error not null @typeLeaveFetchData: ",n)}).catch(function(e){console.error("error @typeLeaveFetchData: ",e)})}}function Rt(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/admin/user/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:z,payload:e}}({loading:!1,user:a})),null!==n&&console.error("error not null @userLoginFetchData: ",n)}).catch(function(e){console.error("error @userLoginFetchData: ",e)})}}function xt(){return function(e){fetch("".concat(b,"/api/holidays/public"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error,l=function(e){var t=[];return e&&e.map(function(e,a){var n=e.date_start.split("-").reverse().join("-"),l=e.date_end.split("-").reverse().join("-");if(t.push(n),n!==l){var r=parseInt(n.substring(n.length-2,n.length)),o=parseInt(l.substring(l.length-2,l.length));if(r>o)r+1===o&&t.push(l);else for(var s=n.substring(0,n.length-2),i=r+1;i<=o;i++)t.push(s+Lt(i,2))}return e}),t}(a);e(function(e){return{type:J,payload:e}}({publicHoliday:l})),null!==n&&console.error("error not null @publicHolidayFetchData: ",n)}).catch(function(e){console.error("error @publicHolidayFetchData: ",e)})}}function Lt(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}a(339);var Nt,Tt=a(69),Ft=je.a.Content,Yt=ke.a.Item,qt=Ie.a.TextArea,Pt=Be.a.Option,Mt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e,t){a.setState(Object(ye.a)({},e,t))},a.handleOnChangeNumber=function(e,t){a.onChange(t,Number(e)),console.log("input=======>",e)},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.leaveForm,Object(ye.a)({},e.target.name,e.target.value));a.props.formOnChange(t)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)}),a.props.SumbitLeave(a.props.leaveForm,function(e){a.props.history.push(e)})},a.handleSubmitSupervisor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)}),a.props.SumbitLeaveSupervisor(a.props.leaveForm,function(e){a.props.history.push(e)})},a.handleStartOpenChange=function(e){e||a.setState({endOpen:!0})},a.handleEndOpenChange=function(e){a.setState({endOpen:e})},a.handleOnChangeID=function(e){a.onChange("contactID",e)},a.handleOnChangeNumber=function(e){var t=Object(v.a)({},a.props.leaveForm,{contact_number:"".concat(a.state.contactID).concat(e.target.value)});a.props.formOnChange(t)},a.handleOnChangeEmployeeNumber=function(e){var t=Object(v.a)({},a.props.leaveForm,{employee_number:Number(e.target.value)});a.props.formOnChange(t)},a.onStartChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leaveForm,{date_from:r});a.props.formOnChange(s),a.onChange("start",o)}a.onChange("from",e)},a.onEndChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leaveForm,{date_to:r});a.props.formOnChange(s),a.onChange("end",o)}a.onChange("to",e)},a.onBackOn=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-"),r=Object(v.a)({},a.props.leaveForm,{back_on:l,half_dates:a.state.halfDate,total:Number(a.state.totalDays)});a.props.formOnChange(r)}},a.disabledStartDate=function(e){var t=a.state.to;return!(!e||!t)&&e.valueOf()>t.valueOf()},a.disabledEndDate=function(e){var t=a.state.publicHolidayDates,n=a.state.from;return!(!e||!n)&&(e.valueOf()<=n.valueOf()||t.find(function(t){return St()(t).format("DDMMYYYY")===St()(e).format("DDMMYYYY")})||"Saturday"===St()(e).format("dddd")||"Sunday"===St()(e).format("dddd"))},a.state={from:null,to:null,start:null,end:null,endOpen:!1,contactID:"+62",halfDate:[],publicHolidayDates:null,totalDays:0},a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeNumber=a.handleOnChangeNumber.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeEmployeeNumber=a.handleOnChangeEmployeeNumber.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeTypeOfLeave=a.handleChangeTypeOfLeave.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeID=a.handleOnChangeID.bind(Object(ve.a)(Object(ve.a)(a))),a.onChangeIsHalfDay=a.onChangeIsHalfDay.bind(Object(ve.a)(Object(ve.a)(a))),a.onChangeAddHalfDay=a.onChangeAddHalfDay.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDate=a.disabledDate.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDateSick=a.disabledDateSick.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDateBack=a.disabledDateBack.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Form-Leave-Request ----------------- "),localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.typeLeaveFetchData(),this.props.userLoginFetchData(),this.props.publicHolidayFetchData()}},{key:"componentWillReceiveProps",value:function(e){e.publicHoliday!==this.props.publicHoliday&&this.setState({publicHolidayDates:e.publicHoliday})}},{key:"componentDidUpdate",value:function(e,t){Nt&&t.totalDays!==Nt&&this.setState({totalDays:Nt})}},{key:"handleChangeTypeOfLeave",value:function(e){if(console.log("val",e),"11"===e||"44"===e||"55"===e){var t=Object(v.a)({},this.props.leaveForm,{type_leave_id:Number(e),reason:""});this.props.formOnChange(t)}else{var a=Object(v.a)({},this.props.leaveForm,{type_leave_id:Number(e)});this.props.formOnChange(a)}}},{key:"handleChangeSelect",value:function(e){console.log("selected=======>",e)}},{key:"onChangeAddHalfDay",value:function(e){var t=document.getElementById("halfDay");!0===e.target.checked?t.style.display="block":t.style.display="none",console.log("checked add hald day = ".concat(e.target.checked))}},{key:"onChangeIsHalfDay",value:function(e,t){if(console.log("".concat(e.target.value," checked is ").concat(e.target.checked)),e.target.checked)this.setState(function(t){return{halfDate:Ct()(t.halfDate,{$push:[e.target.value]})}});else{var a=this.state.halfDate.indexOf(e.target.value);this.setState(function(e){return{halfDate:Ct()(e.halfDate,{$splice:[[a,1]]})}})}}},{key:"disabledDate",value:function(e){var t=this.state.publicHolidayDates;return e<St()().startOf("day")||t.find(function(t){return St()(t).format("DDMMYYYY")===St()(e._d).format("DDMMYYYY")})||"Saturday"===St()(e._d).format("dddd")||"Sunday"===St()(e._d).format("dddd")}},{key:"disabledDateSick",value:function(e){var t=this.state.publicHolidayDates;return e&&e<St()().subtract(7,"days").startOf("day")||t.find(function(t){return St()(t).format("DDMMYYYY")===St()(e._d).format("DDMMYYYY")})||"Saturday"===St()(e._d).format("dddd")||"Sunday"===St()(e._d).format("dddd")}},{key:"disabledDateBack",value:function(e){var t=this.state.publicHolidayDates;return this.state.to>e||t.find(function(t){return St()(t).format("DDMMYYYY")===St()(e._d).format("DDMMYYYY")})||"Saturday"===St()(e._d).format("dddd")||"Sunday"===St()(e._d).format("dddd")}},{key:"getDates",value:function(e,t){for(var a=this.state.publicHolidayDates,n=new Date(e),l=new Date(t),r=[];n<=l;){var o=n.getDay();if(o<6&&o>0){var s=n.getMonth()+1;s<=9&&(s="0"+s);var i=n.getDate();i<=9&&(i="0"+i),r.push(i+"-"+s+"-"+n.getFullYear())}n.setDate(n.getDate()+1)}if(a){for(var c=[],u=0;u<a.length;u++){var d=a[u].split("-").reverse().join("-");c.push(d)}for(var m=0;m<r.length;m++)for(var h=0;h<c.length;h++)r[m]===c[h]&&r.splice(m,1)}return r}},{key:"countTotalDay",value:function(e,t){for(var a=this.state.publicHolidayDates,n=new Date(e),l=new Date(t),r=0,o=n.valueOf();o<=l.valueOf();o+=864e5){for(var s=new Date(o),i=void 0,c=0;c<a.length;c++)i=a[c],s<new Date(i)||s>new Date(i)||r++;0!==s.getDay()&&6!==s.getDay()||r++}return(l-n)/864e5-r+1}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.from,n=t.to,l=t.start,o=t.end,s=t.endOpen,i=this.props.form.getFieldDecorator,c=this.getDates(l,o),u=[],d=localStorage.getItem("role"),m={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},style:{}},h={width:"100%"},p=i("prefix",{initialValue:"+62"})(r.a.createElement(Be.a,{onChange:this.handleOnChangeID,style:{width:70}},r.a.createElement(Pt,{value:"+62"},"+62"),r.a.createElement(Pt,{value:"+66"},"+66"))),f=function(t){u.push(r.a.createElement(Tt.a,{key:t,id:"is_half_day",name:"is_half_day",onChange:function(a){return e.onChangeIsHalfDay(a,c[t])},value:c[t]},c[t]),r.a.createElement("br",null))},E=0;E<c.length;E++)f(E);if(null!==this.state.start&&null!==this.state.end){var g=new Date(this.state.start),y=new Date(this.state.end);Nt=this.countTotalDay(g,y)}return console.log("========>",this.state),r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Ft,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"146px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," Form Leave Request "),r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(Yt,Object.assign({},m,{label:"Type Of Leave"}),i("type_leave_id",{rules:[{required:!0}]})(r.a.createElement(Be.a,{id:"type_leave_id",name:"type_leave_id",placeholder:"Select type of leave",optionFilterProp:"children",onChange:this.handleChangeTypeOfLeave,onSelect:function(t,a){return e.handleChangeSelect(t,a)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onFocus:this.handleFocus,onBlur:this.handleBlur,style:h},this.props.typeLeave.map(function(e){return r.a.createElement(Pt,{key:e.id,value:e.id},e.type_name)})))),22===this.props.leaveForm.type_leave_id||33===this.props.leaveForm.type_leave_id||66===this.props.leaveForm.type_leave_id?r.a.createElement(Yt,Object.assign({},m,{label:"Reason"}),r.a.createElement(Ie.a,{type:"text",id:"reason",name:"reason",placeholder:"reason",onChange:this.handleOnChange,style:h})):"",22===this.props.leaveForm.type_leave_id||33===this.props.leaveForm.type_leave_id?r.a.createElement(Yt,Object.assign({},m,{label:"From"}),i("start date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"date_from",name:"date_from",disabledDate:this.disabledDateSick,format:"DD-MM-YYYY",value:a,placeholder:"Start",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange,style:h}))):r.a.createElement(Yt,Object.assign({},m,{label:"From"}),i("start date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"date_from",name:"date_from",disabledDate:this.disabledDate,format:"DD-MM-YYYY",value:a,placeholder:"Start",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange,style:h}))),r.a.createElement(Yt,Object.assign({},m,{label:"To"}),i("end date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"date_to",name:"date_to",disabledDate:this.disabledEndDate,format:"DD-MM-YYYY",value:n,placeholder:"End",onChange:this.onEndChange,open:s,onOpenChange:this.handleEndOpenChange,style:h}))),r.a.createElement(Yt,null,r.a.createElement(Tt.a,{id:"add_half_day",name:"add_half_day",onChange:this.onChangeAddHalfDay,style:h},"Add Half Day")),r.a.createElement("div",{id:"halfDay"},r.a.createElement(Yt,Object.assign({},m,{label:"Half Day"}),u)),r.a.createElement(Yt,Object.assign({},m,{label:"Back to work on"}),i("back to work",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"back_on",name:"back_on",disabledDate:this.disabledDateBack,onChange:this.onBackOn,format:"DD-MM-YYYY",placeholder:"Back to work",style:h}))),r.a.createElement(Yt,Object.assign({},m,{label:"Contact Address"}),i("contact address",{rules:[{required:!0}]})(r.a.createElement(qt,{type:"text",id:"contact_address",name:"contact_address",placeholder:"address, email, etc",onChange:this.handleOnChange,autosize:{minRows:2,maxRows:8},style:h}))),r.a.createElement(Yt,Object.assign({},m,{label:"Contact Number"}),i("contact number",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"text",id:"contact_number",name:"contact_number",placeholder:"Phone number",addonBefore:p,onChange:this.handleOnChangeNumber,style:h}))),"employee"===d?r.a.createElement(Yt,null,r.a.createElement(Re.a,{onClick:this.handleSubmit,htmlType:"submit",type:"primary",style:{width:"35%"}},"Create")):r.a.createElement(Yt,null,r.a.createElement(Re.a,{onClick:this.handleSubmitSupervisor,htmlType:"submit",type:"primary",style:{width:"35%"}},"CREATE"))))),r.a.createElement($e,null))}}]),t}(l.Component),At=ke.a.create()(Mt),Vt=Object(E.b)(function(e){return{leaveForm:e.leaveRequestReducer,typeLeave:e.fetchTypeLeaveReducer.typeLeave,user:e.fetchUserLoginReducer.user,publicHoliday:e.fetchPublicHolidayReducer.publicHoliday}},function(e){return Object(g.b)({formOnChange:wt,SumbitLeave:kt,SumbitLeaveSupervisor:_t,typeLeaveFetchData:It,userLoginFetchData:Rt,publicHolidayFetchData:xt},e)})(At),Bt=a(13),Ht=a.n(Bt);function Ut(e){return function(t){t({type:U,payload:e})}}function Gt(e,t){return function(a){fetch("".concat(b,"/api/admin/leave"),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var n=e.body,l=e.error;null!==n?(a({type:D}),t("/admin/list-pending-request"),lt.a.success("Create leave request success")):"Type request malform"===l?lt.a.error("Create failed, please check all field!"):lt.a.error(l)}).catch(function(e){console.error("error @AdminSumbitLeave: ",e)})}}var Wt,zt=je.a.Header,Jt=Ge.a.SubMenu,Kt=Object(Ue.a)(function(e){var t=e.history;return r.a.createElement(Re.a,{onClick:function(){localStorage.clear(),t.push("/")},type:"danger",ghost:!0},"Logout")}),Qt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={role:localStorage.getItem("role"),id:localStorage.getItem("id")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(zt,null,r.a.createElement(Ge.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(Ge.a.Item,{key:"1"},r.a.createElement(be.a,{to:"/admin"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"home"})),"Home")),r.a.createElement(Ge.a.Item,{key:"3"},r.a.createElement(be.a,{to:"/admin/register-user"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"form"})),"Add User")),r.a.createElement(Jt,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"user"}),"Employee")},r.a.createElement(Ge.a.Item,{key:"schedule:1"},r.a.createElement(be.a,{to:"/admin/leave-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"form"})),"Form Leave Request")),r.a.createElement(Ge.a.Item,{key:"schedule:2"},r.a.createElement(be.a,{to:"/admin/list-pending-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Pending Request")),r.a.createElement(Ge.a.Item,{key:"schedule:3"},r.a.createElement(be.a,{to:"/admin/list-approve-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Approve Request")),r.a.createElement(Ge.a.Item,{key:"schedule:4"},r.a.createElement(be.a,{to:"/admin/list-reject-request"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"schedule"})),"List Reject Request"))),r.a.createElement(Jt,{title:r.a.createElement("span",null,r.a.createElement(_e.a,{type:"setting"}),"Settings")},r.a.createElement(Ge.a.Item,{key:"setting:2"},r.a.createElement(be.a,{to:"/admin/edit-password"},r.a.createElement("span",null,r.a.createElement(_e.a,{type:"form"})),"Change Password"))),r.a.createElement(Ge.a.Item,{key:"4"},r.a.createElement(Kt,null))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}}))}}]),t}(r.a.Component),$t=(a(346),je.a.Content),Xt=ke.a.Item,Zt=Ie.a.TextArea,ea=Be.a.Option,ta=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e,t){a.setState(Object(ye.a)({},e,t))},a.handleOnChangeNumber=function(e,t){a.onChange(t,Number(e)),console.log("input=======>",e)},a.handleSubmitSupervisor=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)}),a.props.AdminSumbitLeave(a.props.leaveForm,function(e){a.props.history.push(e)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.leaveForm,Object(ye.a)({},e.target.name,e.target.value));a.props.formOnChange(t)},a.handleStartOpenChange=function(e){e||a.setState({endOpen:!0})},a.handleEndOpenChange=function(e){a.setState({endOpen:e})},a.handleOnChangeID=function(e){a.onChange("contactID",e)},a.handleOnChangeNumber=function(e){var t=Object(v.a)({},a.props.leaveForm,{contact_number:"".concat(a.state.contactID).concat(e.target.value)});a.props.formOnChange(t)},a.handleOnChangeEmployeeNumber=function(e){var t=Object(v.a)({},a.props.leaveForm,{employee_number:Number(e.target.value)});a.props.formOnChange(t)},a.onStartChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leaveForm,{date_from:r});a.props.formOnChange(s),a.onChange("start",o)}a.onChange("from",e)},a.onEndChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leaveForm,{date_to:r});a.props.formOnChange(s),a.onChange("end",o)}a.onChange("to",e)},a.disabledStartDate=function(e){var t=a.state.to;return!(!e||!t)&&e.valueOf()>t.valueOf()},a.disabledEndDate=function(e){var t=a.state.publicHolidayDates,n=a.state.from;return!(!e||!n)&&(e.valueOf()<=n.valueOf()||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e).format("DDMMYYYY")})||"Saturday"===Ht()(e).format("dddd")||"Sunday"===Ht()(e).format("dddd"))},a.onBackOn=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-"),r=Object(v.a)({},a.props.leaveForm,{back_on:l,half_dates:a.state.halfDate,total:Number(a.state.totalDays)});a.props.formOnChange(r)}},a.state={from:null,to:null,start:null,end:null,endOpen:!1,contactID:"+62",halfDate:[],publicHolidayDates:null,totalDays:null},a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeNumber=a.handleOnChangeNumber.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeEmployeeNumber=a.handleOnChangeEmployeeNumber.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeTypeOfLeave=a.handleChangeTypeOfLeave.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeID=a.handleOnChangeID.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDate=a.disabledDate.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDateSick=a.disabledDateSick.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDateBack=a.disabledDateBack.bind(Object(ve.a)(Object(ve.a)(a))),a.onChangeIsHalfDay=a.onChangeIsHalfDay.bind(Object(ve.a)(Object(ve.a)(a))),a.onChangeAddHalfDay=a.onChangeAddHalfDay.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Form-Leave-Request-Admin ----------------- "),localStorage.getItem("token")?"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.typeLeaveFetchData(),this.props.userLoginFetchData(),this.props.publicHolidayFetchData()}},{key:"componentWillReceiveProps",value:function(e){e.publicHoliday!==this.props.publicHoliday&&this.setState({publicHolidayDates:e.publicHoliday})}},{key:"componentDidUpdate",value:function(e,t){Wt&&t.totalDays!==Wt&&this.setState({totalDays:Wt})}},{key:"handleChangeTypeOfLeave",value:function(e){if(console.log("val",e),"11"===e||"44"===e||"55"===e){var t=Object(v.a)({},this.props.leaveForm,{type_leave_id:Number(e),reason:""});this.props.formOnChange(t)}else{var a=Object(v.a)({},this.props.leaveForm,{type_leave_id:Number(e)});this.props.formOnChange(a)}}},{key:"handleChangeSelect",value:function(e){console.log("selected=======>",e)}},{key:"disabledDate",value:function(e){var t=this.state.publicHolidayDates;return e&&e<Ht()().subtract(14,"days").startOf("day")||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}},{key:"disabledDateSick",value:function(e){var t=this.state.publicHolidayDates;return e&&e<Ht()().subtract(14,"days").startOf("day")||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}},{key:"disabledDateBack",value:function(e){var t=this.state.publicHolidayDates;return this.state.to>e||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}},{key:"getDates",value:function(e,t){for(var a=this.state.publicHolidayDates,n=new Date(e),l=new Date(t),r=[];n<=l;){var o=n.getDay();if(o<6&&o>0){var s=n.getMonth()+1;s<=9&&(s="0"+s);var i=n.getDate();i<=9&&(i="0"+i),r.push(i+"-"+s+"-"+n.getFullYear())}n.setDate(n.getDate()+1)}if(a){for(var c=[],u=0;u<a.length;u++){var d=a[u].split("-").reverse().join("-");c.push(d)}for(var m=0;m<r.length;m++)for(var h=0;h<c.length;h++)r[m]===c[h]&&r.splice(m,1)}return r}},{key:"countTotalDay",value:function(e,t){for(var a=this.state.publicHolidayDates,n=new Date(e),l=new Date(t),r=0,o=n.valueOf();o<=l.valueOf();o+=864e5){for(var s=new Date(o),i=void 0,c=0;c<a.length;c++)i=a[c],s<new Date(i)||s>new Date(i)||r++;0!==s.getDay()&&6!==s.getDay()||r++}return(l-n)/864e5-r+1}},{key:"onChangeAddHalfDay",value:function(e){var t=document.getElementById("halfDay");!0===e.target.checked?t.style.display="block":t.style.display="none",console.log("checked add hald day = ".concat(e.target.checked))}},{key:"onChangeIsHalfDay",value:function(e,t){if(console.log("".concat(e.target.value," checked is ").concat(e.target.checked)),e.target.checked)this.setState(function(t){return{halfDate:Ct()(t.halfDate,{$push:[e.target.value]})}});else{var a=this.state.halfDate.indexOf(e.target.value);this.setState(function(e){return{halfDate:Ct()(e.halfDate,{$splice:[[a,1]]})}})}}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.from,n=t.to,l=t.start,o=t.end,s=t.endOpen,i=this.props.form.getFieldDecorator,c=this.getDates(l,o),u=[],d={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},style:{}},m={width:"100%"},h=i("prefix",{initialValue:"+62"})(r.a.createElement(Be.a,{onChange:this.handleOnChangeID,style:{width:70}},r.a.createElement(ea,{value:"+62"},"+62"),r.a.createElement(ea,{value:"+66"},"+66"))),p=function(t){u.push(r.a.createElement(Tt.a,{key:t,id:"is_half_day",name:"is_half_day",onChange:function(a){return e.onChangeIsHalfDay(a,c[t])},value:c[t]},c[t]),r.a.createElement("br",null))},f=0;f<c.length;f++)p(f);if(null!==this.state.start&&null!==this.state.end){var E=new Date(this.state.start),g=new Date(this.state.end);Wt=this.countTotalDay(E,g)}return console.log("========>",this.state),r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement($t,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"146px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," Form Leave Request "),r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(Xt,Object.assign({},d,{label:"Employee ID"}),i("Employee ID",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"number",id:"employee_number",name:"employee_number",placeholder:"Employee ID",onChange:this.handleOnChangeEmployeeNumber}))),r.a.createElement(Xt,Object.assign({},d,{label:"Type Of Leave"}),i("type_leave_id",{rules:[{required:!0}]})(r.a.createElement(Be.a,{id:"type_leave_id",name:"type_leave_id",placeholder:"Select type of leave",optionFilterProp:"children",onChange:this.handleChangeTypeOfLeave,onSelect:function(t,a){return e.handleChangeSelect(t,a)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onFocus:this.handleFocus,onBlur:this.handleBlur,style:m},this.props.typeLeave.map(function(e){return r.a.createElement(ea,{key:e.id,value:e.id},e.type_name)})))),22===this.props.leaveForm.type_leave_id||33===this.props.leaveForm.type_leave_id||66===this.props.leaveForm.type_leave_id?r.a.createElement(Xt,Object.assign({},d,{label:"Reason"}),r.a.createElement(Ie.a,{type:"text",id:"reason",name:"reason",placeholder:"reason",onChange:this.handleOnChange,style:m})):"",(22===this.props.leaveForm.type_leave_id||this.props.leaveForm.type_leave_id,r.a.createElement(Xt,Object.assign({},d,{label:"From"}),i("start date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"date_from",name:"date_from",format:"DD-MM-YYYY",value:a,placeholder:"Start",onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange,style:m})))),r.a.createElement(Xt,Object.assign({},d,{label:"To"}),i("end date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"date_to",name:"date_to",disabledDate:this.disabledEndDate,format:"DD-MM-YYYY",value:n,placeholder:"End",onChange:this.onEndChange,open:s,onOpenChange:this.handleEndOpenChange,style:m}))),r.a.createElement(Xt,null,r.a.createElement(Tt.a,{id:"add_half_day",name:"add_half_day",onChange:this.onChangeAddHalfDay,style:m},"Add Half Day")),r.a.createElement("div",{id:"halfDay"},r.a.createElement(Xt,Object.assign({},d,{label:"Half Day"}),u)),r.a.createElement(Xt,Object.assign({},d,{label:"Back to work on"}),i("back to work",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"back_on",name:"back_on",disabledDate:this.disabledDateBack,onChange:this.onBackOn,format:"DD-MM-YYYY",placeholder:"Back to work",style:m}))),r.a.createElement(Xt,Object.assign({},d,{label:"Contact Address"}),i("contact address",{rules:[{required:!0}]})(r.a.createElement(Zt,{type:"text",id:"contact_address",name:"contact_address",placeholder:"address, email, etc",onChange:this.handleOnChange,autosize:{minRows:2,maxRows:8},style:m}))),r.a.createElement(Xt,Object.assign({},d,{label:"Contact Number"}),i("contact number",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"text",id:"contact_number",name:"contact_number",placeholder:"Phone number",addonBefore:h,onChange:this.handleOnChangeNumber,style:m}))),r.a.createElement(Xt,Object.assign({},d,{label:"Notes"}),i("notes",{})(r.a.createElement(Zt,{type:"text",id:"notes",name:"notes",placeholder:"notes",onChange:this.handleOnChange,autosize:{minRows:2,maxRows:8},style:m}))),r.a.createElement(Xt,null,r.a.createElement(Re.a,{onClick:this.handleSubmitSupervisor,htmlType:"submit",type:"primary",style:{width:"35%"}},"CREATE"))))),r.a.createElement($e,null))}}]),t}(l.Component),aa=ke.a.create()(ta),na=Object(E.b)(function(e){return{leaveForm:e.adminLeaveRequestReducer,typeLeave:e.fetchTypeLeaveReducer.typeLeave,user:e.fetchUserLoginReducer.user,publicHoliday:e.fetchPublicHolidayReducer.publicHoliday}},function(e){return Object(g.b)({formOnChange:Ut,AdminSumbitLeave:Gt,typeLeaveFetchData:It,userLoginFetchData:Rt,publicHolidayFetchData:xt},e)})(aa);function la(e){return function(t){t(function(e){return{type:"EDITING_REQUEST",payload:e}}({loading:!1,leave:Object(v.a)({},e)}))}}function ra(e){return function(t){t(function(e){return{type:"FETCH_EDIT",payload:e}}({loading:!1,leave:Object(v.a)({},e)}))}}function oa(e,t){return function(a){fetch("".concat(b,"/api/employee/leave/").concat(e.id),{method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;null!==a?(lt.a.success(a),t("/employee/list-pending-request")):null!==n&&lt.a.error(n)}).catch(function(e){console.error(e)})}}a(348);var sa=a(350),ia=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:250,justifyContent:"center"}},r.a.createElement(sa.a,{size:"large"}))}}]),t}(r.a.Component),ca=(a(351),je.a.Content),ua=Ie.a.TextArea,da=ke.a.Item,ma=Be.a.Option,ha=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveEdit=function(e){e.preventDefault(),a.props.saveEditLeave(a.props.leave,function(e){a.props.history.push(e)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.leave,Object(ye.a)({},e.target.name,e.target.value));a.props.handleEdit(t)},a.disabledStartDate=function(e){var t=a.state.to;return!(!e||!t)&&e.valueOf()>t.valueOf()},a.disabledEndDate=function(e){var t=a.state.from;return!(!e||!t)&&e.valueOf()<=t.valueOf()},a.onChange=function(e,t){a.setState(Object(ye.a)({},e,t))},a.onStartChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leave,{date_from:r});a.props.handleEdit(s),a.onChange("start",o)}a.onChange("from",e)},a.onEndChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=("0"+t.getDate()).slice(-2),r=[l,n,t.getFullYear()].join("-"),o=[n,l,t.getFullYear()].join("-"),s=Object(v.a)({},a.props.leave,{date_to:r});a.props.handleEdit(s),a.onChange("end",o)}a.onChange("to",e)},a.handleStartOpenChange=function(e){e||a.setState({endOpen:!0})},a.handleEndOpenChange=function(e){a.setState({endOpen:e})},a.onBackOn=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-"),r=Object(v.a)({},a.props.leave,{back_on:l,half_dates:a.state.halfDate});a.props.handleEdit(r)}},a.state={from:null,to:null,start:null,end:null,endOpen:!1,halfDate:[],datesHalf:null},a.saveEdit=a.saveEdit.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeTypeOfLeave=a.handleChangeTypeOfLeave.bind(Object(ve.a)(Object(ve.a)(a))),a.disabledDateBack=a.disabledDateBack.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Request-Leave-Edit ----------------- ")}},{key:"componentDidMount",value:function(){if("employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"),void 0===this.props.history.location.state)this.props.history.push("/");else{var e=Number(this.props.history.location.pathname.split("/").pop()),t=this.props.history.location.state.leave.filter(function(t){return t.id===e});this.props.fetchedEdit(t[0]),this.props.typeLeaveFetchData()}}},{key:"componentWillReceiveProps",value:function(e){e.leave!==this.props.leave&&this.setState({start:this.formatDate(St()(e.leave.date_from,"DD-MM-YYYY")),end:this.formatDate(St()(e.leave.date_to,"DD-MM-YYYY")),datesHalf:e.leave.half_dates.toString().split(",")})}},{key:"handleChangeTypeOfLeave",value:function(e){if("11"===e||"44"===e||"55"===e){var t=Object(v.a)({},this.props.leave,{type_leave_id:Number(e),reason:""});this.props.handleEdit(t)}else{var a=Object(v.a)({},this.props.leave,{type_leave_id:Number(e)});this.props.handleEdit(a)}}},{key:"handleChangeSelect",value:function(e){console.log("selected=======>",e)}},{key:"disabledDate",value:function(e){return e&&e<St()().startOf("day")}},{key:"disabledDateSick",value:function(e){return e&&e<St()().subtract(7,"days").startOf("day")}},{key:"disabledDateBack",value:function(e){return this.state.to&&this.state.to>e}},{key:"formatDate",value:function(e){var t=new Date(e._d);return[("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2),t.getFullYear()].join("-")}},{key:"getDates",value:function(e,t){for(var a=new Date(e),n=new Date(t),l=[];a<=n;){var r=a.getDay();if(r<6&&r>0){var o=a.getMonth()+1;o<=9&&(o="0"+o);var s=a.getDate();s<=9&&(s="0"+s),l.push(s+"-"+o+"-"+a.getFullYear())}a.setDate(a.getDate()+1)}return l}},{key:"onChangeAddHalfDay",value:function(e){var t=document.getElementById("halfDay");!0===e.target.checked?t.style.display="block":t.style.display="none",console.log("checked add hald day = ".concat(e.target.checked))}},{key:"onChangeIsHalfDay",value:function(e,t){if(console.log("".concat(e.target.value," checked is ").concat(e.target.checked)),e.target.checked)this.setState(function(t){return{halfDate:Ct()(t.halfDate,{$push:[e.target.value]})}});else{var a=this.state.halfDate.indexOf(e.target.value);this.setState(function(e){return{halfDate:Ct()(e.halfDate,{$splice:[[a,1]]})}})}}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.start,l=a.end,o=a.endOpen,s=a.datesHalf,i={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},style:{}},c={width:"100%"},u=[],d=this.getDates(n,l);if(console.log(e),null!==s){var m=function(e){var a=function(a){s[a].trim()===d[e]?u.push(r.a.createElement(Tt.a,{key:a,id:"is_half_day",name:"is_half_day",value:s[a],defaultChecked:!0,onChange:function(e){return t.onChangeIsHalfDay(e,s[a])}},s[a]),r.a.createElement("br",null)):u.push(r.a.createElement(Tt.a,{key:e,id:"is_half_day",name:"is_half_day",onChange:function(a){return t.onChangeIsHalfDay(a,d[e])},value:d[e]},d[e]),r.a.createElement("br",null))};for(var n in s)a(n)};for(var h in d)m(h)}return this.props.typeLeave.map(function(a){return a.type_name===t.props.leave.type_name&&(e=a.id),a}),this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(ca,{className:"container",style:{display:"flex",margin:"24px 16px 0",justifyContent:"center",paddingBottom:"73px"}},r.a.createElement("div",{style:{padding:150,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," Form Edit Leave Request "),r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(da,Object.assign({},i,{label:"Type Of Leave"}),r.a.createElement(Be.a,{id:"type_leave_id",name:"type_leave_id",optionFilterProp:"children",onChange:this.handleChangeTypeOfLeave,onSelect:function(e,a){return t.handleChangeSelect(e,a)},defaultValue:this.props.leave.type_name,style:c,onFocus:this.handleFocus,onBlur:this.handleBlur},this.props.typeLeave.map(function(e){return r.a.createElement(ma,{key:e.id,value:e.id},e.type_name)}))),22===this.props.leave.type_leave_id||33===this.props.leave.type_leave_id||66===this.props.leave.type_leave_id?r.a.createElement(da,Object.assign({},i,{label:"Reason"}),r.a.createElement(Ie.a,{type:"text",id:"reason",name:"reason",placeholder:"reason",onChange:this.handleOnChange,style:c})):"",22===this.props.leave.type_leave_id||33===this.props.leave.type_leave_id?r.a.createElement(da,Object.assign({},i,{label:"From"}),r.a.createElement(He.a,{id:"date_from",name:"date_from",format:"DD-MM-YYYY",defaultValue:St()(this.props.leave.date_from,"DD-MM-YYYY"),onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange,disabledDate:this.disabledDateSick,style:c})):r.a.createElement(da,Object.assign({},i,{label:"From"}),r.a.createElement(He.a,{id:"date_from",name:"date_from",format:"DD-MM-YYYY",defaultValue:St()(this.props.leave.date_from,"DD-MM-YYYY"),onChange:this.onStartChange,onOpenChange:this.handleStartOpenChange,disabledDate:this.disabledDate,style:c})),r.a.createElement(da,Object.assign({},i,{label:"To"}),r.a.createElement(He.a,{id:"date_to",name:"date_to",format:"DD-MM-YYYY",defaultValue:St()(this.props.leave.date_to,"DD-MM-YYYY"),onChange:this.onEndChange,open:o,onOpenChange:this.handleEndOpenChange,disabledDate:this.disabledEndDate,style:c})),r.a.createElement(da,null,r.a.createElement(Tt.a,{id:"add_half_day",name:"add_half_day",onChange:this.onChangeAddHalfDay,style:c},"Add Half Day")),r.a.createElement("div",{id:"halfDay"},r.a.createElement(da,Object.assign({},i,{label:"Half Day"}),u)),r.a.createElement(da,Object.assign({},i,{label:"Back to work on"}),r.a.createElement(He.a,{id:"back_on",name:"back_on",format:"DD-MM-YYYY",placeholder:"Back to work",defaultValue:St()(this.props.leave.back_on,"DD-MM-YYYY"),disabledDate:this.disabledDateBack,onChange:this.onBackOn,style:c})),r.a.createElement(da,Object.assign({},i,{label:"Contact Address"}),r.a.createElement(ua,{type:"text",id:"contact_address",name:"contact_address",placeholder:"contact_address, email, etc",value:this.props.leave.contact_address,onChange:this.handleOnChange,autosize:{minRows:2,maxRows:8},style:c})),r.a.createElement(da,Object.assign({},i,{label:"Contact Number"}),r.a.createElement(Ie.a,{type:"text",id:"contact_number",name:"contact_number",placeholder:"Phone number",value:this.props.leave.contact_number,onChange:this.handleOnChange,style:c})),r.a.createElement(da,null,r.a.createElement(Re.a,{onClick:this.saveEdit,htmlType:"submit",type:"primary",style:{width:"35%"}},"EDIT"))))),r.a.createElement($e,null))}}]),t}(l.Component),pa=ke.a.create()(ha),fa=Object(E.b)(function(e){return{loading:e.editRequestReducer.loading,leave:e.editRequestReducer.leave,typeLeave:e.fetchTypeLeaveReducer.typeLeave}},function(e){return Object(g.b)({fetchedEdit:ra,handleEdit:la,saveEditLeave:oa,typeLeaveFetchData:It},e)})(pa),Ea=a(44);function ga(e){return function(t){t(function(e){return{type:W,payload:e}}({loading:!1,balances:e}))}}function ya(){return function(e){fetch("".concat(b,"/api/admin/user/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:C,payload:e}}({loading:!1,users:a})),null!==n&&console.error("error not null @adminGetUsers: ",n)}).catch(function(e){console.error("error @adminGetUsers: ",e)})}}function va(e){return function(t){fetch("".concat(b,"/api/user/type-leave/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:G,payload:e}}({loading:!1,balances:a})),null!==n&&console.error("error not null @adminEditLeaveBalances: ",n)}).catch(function(e){console.error("error @adminEditLeaveBalances: ",e)})}}function ba(e,t,a){return function(n){fetch("".concat(b,"/api/user/type-leave/").concat(t),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var t=e.body,n=e.error;if(null!==t)lt.a.success(t),a("/admin");else if("Type request malform"===n){lt.a.error("Error empty field!")}else lt.a.error(n)}).catch(function(e){console.error("error @saveEditBalanceUser: ",e)})}}function Da(e,t){return function(a){fetch("".concat(b,"/api/admin/user/").concat(t),{method:"DELETE"}).then(function(e){return e.json()}).then(function(n){n.body;var l=n.error,r=e.filter(function(e){return e.id!==t}),o={loading:!1,users:Object(Ea.a)(r)};a(function(e){return{type:S,payload:e}}(o)),null!==l&&console.error("error not null @adminDeleteUser: ",l)}).catch(function(e){console.error("error @adminDeleteUser: ",e)})}}function Ca(){return function(e){fetch("".concat(b,"/api/admin/leave/pending/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:k,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchAdminLeavePending: ",n)}).catch(function(e){console.error("error @fetchAdminLeavePending: ",e)})}}function Oa(){return function(e){fetch("".concat(b,"/api/admin/leave/accept/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:_,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchAdminLeaveApprove: ",n)}).catch(function(e){console.error("error @fetchAdminLeaveApprove: ",e)})}}function Sa(){return function(e){fetch("".concat(b,"/api/admin/leave/reject/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:I,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchAdminLeaveReject: ",n)}).catch(function(e){console.error("error @fetchAdminLeaveReject: ",e)})}}function wa(e,t){return function(a){fetch("".concat(b,"/api/employee/leave/").concat(t),{method:"DELETE"}).then(function(e){return e.json()}).then(function(n){n.body;var l=n.error,r=e.filter(function(e){return e.id!==t}),o={loading:!1,leaves:Object(Ea.a)(r)};a(function(e){return{type:x,payload:e}}(o)),null!==l&&console.error("error not null @deleteRequestLeave: ",l)}).catch(function(e){console.error("error @deleteRequestLeave: ",e)})}}function ja(e,t,a){return function(n){fetch("".concat(b,"/api/admin/leave/cancel/").concat(t,"/").concat(a,"/"),{method:"PUT"}).then(function(e){return e.json()}).then(function(a){var l=a.body,r=a.error;if(null!==l){var o=e.filter(function(e){return e.id!==t}),s={loading:!1,leaves:Object(Ea.a)(o)};n(function(e){return{type:Y,payload:e}}(s)),lt.a.success(l)}else lt.a.error(r)}).catch(function(e){console.error("error @cancelRequestLeave: ",e)})}}function ka(e,t){return function(a){fetch("".concat(b,"/api/leave/reports?fromDate=").concat(e,"&toDate=").concat(t),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var t=e.body,a=e.error;if(null!==t){var n=window.URL.createObjectURL(new Blob([Ia(t)])),l=document.createElement("a");l.href=n,l.setAttribute("download","report_leave_request.xlsx"),document.body.appendChild(l),l.click(),lt.a.success("Download success"),window.location.reload()}else null===t?lt.a.error("Data is not available"):lt.a.error(a)}).catch(function(e){console.error("error @downloadReport: ",e)})}}function _a(e,t,a){return function(n){fetch("".concat(b,"/api/leave/report/type?fromDate=").concat(e,"&toDate=").concat(t,"&typeID=").concat(a),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var t=e.body,a=e.error;if(null!==t){var n=window.URL.createObjectURL(new Blob([Ia(t)])),l=document.createElement("a");l.href=n,l.setAttribute("download","report_leave_request_by_type_leave.xlsx"),document.body.appendChild(l),l.click(),lt.a.success("Download success"),window.location.reload()}else null===t?lt.a.error("Data is not available"):lt.a.error(a)}).catch(function(e){console.error("error @downloadReportTypeLeave: ",e)})}}function Ia(e){var t="object"!==typeof e?JSON.parse(e):e,a="".concat(Object.keys(t[0]).map(function(e){return'"'.concat(e,'"')}).join(","))+"\r\n";return t.reduce(function(e,t){return e+="".concat(Object.values(t).map(function(e){return'"'.concat(e,'"')}).join(","))+"\r\n"},a)}a(353);var Ra=a(453),xa=a(454),La=a(457),Na=je.a.Content,Ta=je.a.Footer,Fa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).editUser=function(e,t){a.props.history.push({pathname:"/admin/edit-user/"+t,state:{users:e}})},a.editBalance=function(e){a.props.history.push({pathname:"/admin/edit-balance/"+e})},a.adminDeleteUser=function(e,t){a.props.adminDeleteUser(e,t)},a.columns=[{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:"10%"},{title:"Name",dataIndex:"name",key:"name",width:"20%"},{title:"Email",dataIndex:"email",key:"email",width:"15%"},{title:"Position",dataIndex:"position",key:"position",width:"15%"},{title:"Role",dataIndex:"role",key:"role",width:"10%"},{title:"Action",key:"action",width:"25%",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(Re.a,{onClick:function(){a.editUser(a.props.users,t.id)},type:"primary"},"Edit"),r.a.createElement(Ra.a,{type:"vertical"}),r.a.createElement(xa.a,{placement:"top",title:"Are you sure delete this employee?",onConfirm:function(){a.adminDeleteUser(a.props.users,t.id),lt.a.success("Employee has been delete!")},okText:"Yes",cancelText:"No"},r.a.createElement(Re.a,{type:"danger"},"Delete")),r.a.createElement(Ra.a,{type:"vertical"}),"supervisor"===t.role||"employee"===t.role?r.a.createElement(Re.a,{onClick:function(){a.editBalance(t.id)},type:"primary"},"Edit Leave Balance"):"")}}],a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-Page ----------------- ")}},{key:"componentDidMount",value:function(){"admin"!==localStorage.getItem("role")&&this.props.history.push("/"),this.props.adminGetUsers()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.props.loading?r.a.createElement(ia,null):r.a.createElement("div",null,r.a.createElement(je.a,{className:"layout"},r.a.createElement(Qt,null),r.a.createElement(Na,{className:"container",style:{display:"flex",margin:"20px 15px 0",justifyContent:"center",paddingBottom:70}},r.a.createElement("div",{style:{padding:"20px",backgroundColor:"#fff",width:"1700px"}},r.a.createElement(La.a,{columns:this.columns,dataSource:this.props.users,rowKey:function(e){return e.id},pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:10,total:"".concat(this.props.users&&this.props.users.length)}}))),r.a.createElement(Ta,{className:"App-footer-s"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://www.tnis.com"},"PT. TNIS Service Indonesia")," \xa9 2018. All Right Reserved."))))}}]),t}(l.Component),Ya=Object(E.b)(function(e){return{loading:e.adminReducer.loading,users:e.adminReducer.users}},function(e){return Object(g.b)({adminGetUsers:ya,adminDeleteUser:Da},e)})(Fa);function qa(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*?",a=0;a<7;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function Pa(e,t){return e<Ht()().startOf("day")||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}function Ma(e,t){return e&&e<Ht()().subtract(7,"days").startOf("day")||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}function Aa(e,t){return this.state.to>e||t.find(function(t){return Ht()(t).format("DDMMYYYY")===Ht()(e._d).format("DDMMYYYY")})||"Saturday"===Ht()(e._d).format("dddd")||"Sunday"===Ht()(e._d).format("dddd")}function Va(e,t,a){for(var n=new Date(e),l=new Date(t),r=[];n<=l;){var o=n.getDay();if(o<6&&o>0){var s=n.getMonth()+1;s<=9&&(s="0"+s);var i=n.getDate();i<=9&&(i="0"+i),r.push(i+"-"+s+"-"+n.getFullYear())}n.setDate(n.getDate()+1)}if(a){for(var c=[],u=0;u<a.length;u++){var d=a[u].split("-").reverse().join("-");c.push(d)}for(var m=0;m<r.length;m++)for(var h=0;h<c.length;h++)r[m]===c[h]&&r.splice(m,1)}return r}function Ba(e,t,a){for(var n=new Date(e),l=new Date(t),r=0,o=n.valueOf();o<=l.valueOf();o+=864e5){for(var s=new Date(o),i=void 0,c=0;c<a.length;c++)i=a[c],s<new Date(i)||s>new Date(i)||r++;0!==s.getDay()&&6!==s.getDay()||r++}return(l-n)/864e5-r+1}function Ha(e){var t=new Date,a=t.getDate(),n=t.getMonth()+1,l=t.getFullYear();a<10&&(a="0"+a),n<10&&(n="0"+n);var r="".concat(a,"-").concat(n,"-").concat(l),o=Ht()("".concat(e),"DD-MM-YYYY");return Ht()("".concat(r),"DD-MM-YYYY").diff(o,"days")}function Ua(e){return function(t){t({type:O,payload:e})}}function Ga(e){return{type:D}}function Wa(e,t){return function(a){fetch("".concat(b,"/api/admin/user/register"),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var n=e.body,l=e.error;if(null!==n)a(Ga),t("/admin"),lt.a.success(n);else if("Type request malform"===l){lt.a.error("Error empty field!")}else lt.a.error(l)}).catch(function(e){console.error("error @SumbitSignUp: ",e)})}}a(395);var za=je.a.Content,Ja=ke.a.Item,Ka=Be.a.Option,Qa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)}),a.props.registerUser(a.props.signupForm,function(e){a.props.history.push(e)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.signupForm,Object(ye.a)({},e.target.name,e.target.value));a.props.formOnchange(t),a.props.form.setFieldsValue(Object(ye.a)({},e.target.name,e.target.value))},a.handleOnChangeEmployeeNumber=function(e){var t=Object(v.a)({},a.props.signupForm,{employee_number:Number(e.target.value),password:n.MakeID()});a.props.formOnchange(t)},a.onStartWorking=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-"),r=Object(v.a)({},a.props.signupForm,{start_working_date:l});a.props.formOnchange(r)}},a.handleOnChangeID=function(e){a.setState({contactID:e})},a.handleOnChangePhone=function(e){var t=Object(v.a)({},a.props.signupForm,{mobile_phone:"".concat(a.state.contactID).concat(e.target.value)});a.props.formOnchange(t)},a.state={contactID:"+62"},a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeEmployeeNumber=a.handleOnChangeEmployeeNumber.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeGender=a.handleChangeGender.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeRole=a.handleChangeRole.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeSupervisor=a.handleChangeSupervisor.bind(Object(ve.a)(Object(ve.a)(a))),a.onStartWorking=a.onStartWorking.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangeID=a.handleOnChangeID.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChangePhone=a.handleOnChangePhone.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Register-User ----------------- "),localStorage.getItem("token")?"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.getSupervisors()}},{key:"handleChangeGender",value:function(e){var t=Object(v.a)({},this.props.signupForm,{gender:e});this.props.formOnchange(t)}},{key:"handleChangeRole",value:function(e){if("employee"===e){var t=Object(v.a)({},this.props.signupForm,{role:e});this.props.formOnchange(t)}else{var a=Object(v.a)({},this.props.signupForm,{role:e,supervisor_id:Number()});this.props.formOnchange(a)}}},{key:"handleChangeSupervisor",value:function(e){var t=Object(v.a)({},this.props.signupForm,{supervisor_id:Number(e)});this.props.formOnchange(t)}},{key:"handleChangeSelect",value:function(e){console.log("selected=======>",e)}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"makeid",value:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*?",a=0;a<7;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},n=t("prefix",{initialValue:"+62"})(r.a.createElement(Be.a,{onChange:this.handleOnChangeID,style:{width:70}},r.a.createElement(Ka,{value:"+62"},"+62"),r.a.createElement(Ka,{value:"+66"},"+66")));return r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(za,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"96px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," REGISTER USER "),r.a.createElement("div",null,r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(Ja,Object.assign({},a,{label:"Employee ID"}),t("Employee ID",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"number",id:"employee_number",name:"employee_number",placeholder:"Employee ID",onChange:this.handleOnChangeEmployeeNumber}))),r.a.createElement(Ja,Object.assign({},a,{label:"Full Name"}),t("name",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"text",id:"name",name:"name",placeholder:"name",onChange:this.handleOnChange}))),r.a.createElement(Ja,Object.assign({},a,{label:"Email"}),t("email",{rules:[{type:"email"},{required:!0}]})(r.a.createElement(Ie.a,{type:"email",id:"email",name:"email",placeholder:"email",onChange:this.handleOnChange}))),r.a.createElement(Ja,Object.assign({},a,{label:"Gender"}),t("gender",{rules:[{required:!0}]})(r.a.createElement(Be.a,{id:"gender",name:"gender",placeholder:"Select gender",optionFilterProp:"children",onChange:this.handleChangeGender,onSelect:function(t,a){return e.handleChangeSelect(t,a)},showSearch:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(Ka,{value:"Male"},"Male"),r.a.createElement(Ka,{value:"Female"},"Female")))),r.a.createElement(Ja,Object.assign({},a,{label:"Position"}),t("position",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"text",id:"position",name:"position",placeholder:"position",onChange:this.handleOnChange}))),r.a.createElement(Ja,Object.assign({},a,{label:"Start Working Date"}),t("start working date",{rules:[{required:!0}]})(r.a.createElement(He.a,{id:"start_working_date",name:"start_working_date",onChange:this.onStartWorking,format:"DD-MM-YYYY",placeholder:"start working date",style:{width:"100%"}}))),r.a.createElement(Ja,Object.assign({},a,{label:"Mobile Phone"}),t("mobile phone",{rules:[{required:!0}]})(r.a.createElement(Ie.a,{type:"text",id:"mobile_phone",name:"mobile_phone",placeholder:"mobile phone",addonBefore:n,onChange:this.handleOnChangePhone}))),r.a.createElement(Ja,Object.assign({},a,{label:"Role"}),t("role",{rules:[{required:!0}]})(r.a.createElement(Be.a,{id:"role",name:"role",placeholder:"Select Role",optionFilterProp:"children",onChange:this.handleChangeRole,onSelect:function(t,a){return e.handleChangeSelect(t,a)},showSearch:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(Ka,{value:"employee"},"Employee"),r.a.createElement(Ka,{value:"supervisor"},"Supervisor"),r.a.createElement(Ka,{value:"director"},"Director")))),"employee"===this.props.signupForm.role?r.a.createElement(Ja,Object.assign({},a,{label:"Supervisor"}),r.a.createElement(Be.a,{id:"supervisor_id",name:"supervisor_id",placeholder:"Select Supervisor",optionFilterProp:"children",onChange:this.handleChangeSupervisor,onSelect:function(t,a){return e.handleChangeSelect(t,a)},showSearch:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.props.supervisor?this.props.supervisor.map(function(e){return r.a.createElement(Ka,{key:e.supervisor_id},e.name)}):"")):"",r.a.createElement(Ie.a,{type:"password",id:"password",name:"password",placeholder:"password",onChange:this.handleOnChange,disabled:!0,style:{display:"none"}}),r.a.createElement(Ja,null,r.a.createElement(Re.a,{onClick:this.handleSubmit,htmlType:"submit",type:"primary"}," ","CREATE")))))),r.a.createElement($e,{style:{textAlign:"center"}},r.a.createElement("p",null,r.a.createElement("a",{href:"http://opensource.org/licenses/mit-license.php"}," MIT"),". The website content is licensed"," ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by-nc-sa/4.0/"},"CC BY NC SA 4.0"),"."))))}}]),t}(l.Component),$a=ke.a.create()(Qa),Xa=Object(E.b)(function(e){return{signupForm:e.registerReducer,supervisor:e.AddSupervisorReducer.supervisor}},function(e){return Object(g.b)({formOnchange:Ua,registerUser:Wa,getSupervisors:Me},e)})($a);function Za(e){return function(t){t(function(e){return{type:j,payload:e}}({loading:!1,user:Object(v.a)({},e)}))}}function en(e){return function(t){t(function(e){return{type:w,payload:e}}({loading:!1,user:Object(v.a)({},e)}))}}function tn(e,t){return function(a){fetch("".concat(b,"/api/admin/user/").concat(e.id),{method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;null!==a?(lt.a.success(a),t("/admin")):lt.a.error(n)}).catch(function(e){console.error("err @saveEditUser: ",e)})}}a(397);var an,nn,ln,rn=je.a.Content,on=ke.a.Item,sn=Be.a.Option,cn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveEdit=function(){a.props.saveEditUser(a.props.user,function(e){a.props.history.push(e)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.user,Object(ye.a)({},e.target.name,e.target.value));a.props.handleEdit(t)},a.handleOnChangeNumber=function(e){var t=Object(v.a)({},a.props.user,Object(ye.a)({},e.target.name,Number(e.target.value)));a.props.handleEdit(t)},a.onStartWorking=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-"),r=Object(v.a)({},a.props.user,{start_working_date:l});a.props.handleEdit(r)}},a.state={date:""},a.saveEdit=a.saveEdit.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeGender=a.handleChangeGender.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeRole=a.handleChangeRole.bind(Object(ve.a)(Object(ve.a)(a))),a.handleChangeSupervisor=a.handleChangeSupervisor.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-Edit-User ----------------- ")}},{key:"componentDidMount",value:function(){if("admin"!==localStorage.getItem("role")&&this.props.history.push("/"),void 0===this.props.history.location.state)this.props.history.push("/");else{var e=Number(this.props.history.location.pathname.split("/").pop()),t=this.props.history.location.state.users.filter(function(t){return t.id===e});this.props.fetchedEdit(t[0]),this.props.getSupervisors()}}},{key:"handleChangeGender",value:function(e,t){var a=Object(v.a)({},this.props.user,{gender:e});this.props.handleEdit(a)}},{key:"handleChangeRole",value:function(e){if("employee"===e){var t=Object(v.a)({},this.props.user,{role:e});this.props.handleEdit(t)}else{var a=Object(v.a)({},this.props.user,{role:e,supervisor_id:Number()});this.props.handleEdit(a)}}},{key:"handleChangeSupervisor",value:function(e){var t=Object(v.a)({},this.props.user,{supervisor_id:Number(e)});this.props.handleEdit(t)}},{key:"handleChangeSelect",value:function(e){console.log("selected=======>",e)}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){var e,t=this,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return this.props.supervisor&&this.props.supervisor.map(function(a){return a.supervisor_id===t.props.user.supervisor_id&&a.name!==t.props.user.name?e=a.name:a.supervisor_id===t.props.user.employee_number&&(a.name="",e=a.name),a}),r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(rn,{className:"container",style:{display:"flex",margin:"24px 16px 0",justifyContent:"space-around",paddingBottom:"160px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," EDIT USER "),r.a.createElement("div",null,r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(on,Object.assign({},a,{label:"Employee Number"}),r.a.createElement(Ie.a,{type:"number",id:"employee_number",name:"employee_number",placeholder:"Employee Number",value:this.props.user.employee_number,onChange:this.handleOnChangeNumber})),r.a.createElement(on,Object.assign({},a,{label:"Name"}),r.a.createElement(Ie.a,{type:"text",id:"name",name:"name",placeholder:"name",value:this.props.user.name,onChange:this.handleOnChange})),r.a.createElement(on,Object.assign({},a,{label:"Email"}),r.a.createElement(Ie.a,{type:"email",id:"email",name:"email",placeholder:"email",value:this.props.user.email,onChange:this.handleOnChange})),r.a.createElement(on,Object.assign({},a,{label:"Gender"}),r.a.createElement(Be.a,{id:"gender",name:"gender",placeholder:"Select gender",optionFilterProp:"children",onChange:this.handleChangeGender,onSelect:function(e,a){return t.handleChangeSelect(e,a)},onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:this.props.user.gender},r.a.createElement(sn,{value:"Male"},"Male"),r.a.createElement(sn,{value:"Female"},"Female"))),r.a.createElement(on,Object.assign({},a,{label:"Position"}),r.a.createElement(Ie.a,{type:"text",id:"position",name:"position",placeholder:"position",value:this.props.user.position,onChange:this.handleOnChange})),r.a.createElement(on,Object.assign({},a,{label:"Start Working Date"}),r.a.createElement(He.a,{id:"start_working_date",name:"start_working_date",format:"DD-MM-YYYY",value:St()(this.props.user.start_working_date,"DD-MM-YYYY"),onChange:this.onStartWorking,style:{width:"100%"}})),r.a.createElement(on,Object.assign({},a,{label:"Mobile Phone"}),r.a.createElement(Ie.a,{type:"text",id:"mobile_phone",name:"mobile_phone",placeholder:"mobile_phone",value:this.props.user.mobile_phone,onChange:this.handleOnChange})),r.a.createElement(on,Object.assign({},a,{label:"Role"}),r.a.createElement(Be.a,{id:"role",name:"role",placeholder:"Select Role",optionFilterProp:"children",onChange:this.handleChangeRole,onSelect:function(e,a){return t.handleChangeSelect(e,a)},showSearch:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:this.props.user.role},r.a.createElement(sn,{value:"employee"},"Employee"),r.a.createElement(sn,{value:"supervisor"},"Supervisor"),r.a.createElement(sn,{value:"director"},"Director"))),"employee"===this.props.user.role?r.a.createElement(on,Object.assign({},a,{label:"Supervisor"}),r.a.createElement(Be.a,{id:"supervisor_id",name:"supervisor_id",placeholder:"Select Supervisor",optionFilterProp:"children",onChange:this.handleChangeSupervisor,onSelect:function(e,a){return t.handleChangeSelect(e,a)},showSearch:!0,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:e},this.props.supervisor.map(function(e){return r.a.createElement(sn,{key:e.supervisor_id},e.name)}))):"",r.a.createElement(on,null,r.a.createElement(Re.a,{onClick:function(){t.saveEdit()},htmlType:"submit",type:"primary"},"UPDATE")))))),r.a.createElement($e,null)))}}]),t}(l.Component),un=ke.a.create()(cn),dn=Object(E.b)(function(e){return{loading:e.editUserReducer.loading,user:e.editUserReducer.user,supervisor:e.AddSupervisorReducer.supervisor}},function(e){return Object(g.b)({fetchedEdit:en,handleEdit:Za,saveEditUser:tn,getSupervisors:Me},e)})(un),mn=(a(399),je.a.Content),hn=ke.a.Item,pn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).saveEditBalanceUser=function(){console.log(a.props.balance);var e=Number(a.props.history.location.pathname.split("/").pop());a.props.saveEditBalanceUser(a.props.balance,e,function(e){a.props.history.push(e)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.balance[e.target.id],{leave_remaining:Number(e.target.value)}),n=Object(Ea.a)(a.props.balance);n[e.target.id]=t,console.log(n),a.props.handleEditBalance(n)},a.state={date:""},a.saveEditBalanceUser=a.saveEditBalanceUser.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-Edit-Balance ----------------- ")}},{key:"componentDidMount",value:function(){"admin"!==localStorage.getItem("role")&&this.props.history.push("/");var e=Number(this.props.history.location.pathname.split("/").pop());this.props.adminEditLeaveBalances(e)}},{key:"handleBlur",value:function(){console.log("blur")}},{key:"handleFocus",value:function(){console.log("focus")}},{key:"render",value:function(){var e=this,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},a=[];return this.props.balance&&this.props.balance.map(function(n,l){return a.push(r.a.createElement(hn,Object.assign({},t,{label:n.type_name}),r.a.createElement(Ie.a,{type:"number",id:l,name:n.type_name,defaultValue:n.leave_remaining,onChange:e.handleOnChange}))),n}),this.props.loading?r.a.createElement(ia,null):r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(mn,{className:"container",style:{display:"flex",margin:"24px 16px 0",justifyContent:"space-around",paddingBottom:"160px"}},r.a.createElement("div",{style:{padding:100,paddingBottom:50,paddingTop:50,background:"#fff",minHeight:360}},r.a.createElement("h1",null," EDIT BALANCE "),r.a.createElement("div",null,r.a.createElement(ke.a,{onSubmit:this.handleSubmit,className:"login-form"},a,r.a.createElement(hn,null,r.a.createElement(Re.a,{onClick:function(){e.saveEditBalanceUser()},htmlType:"submit",type:"primary"},"UPDATE")))))),r.a.createElement($e,null)))}}]),t}(l.Component),fn=ke.a.create()(pn),En=Object(E.b)(function(e){return{loading:e.adminReducer.loading,balance:e.adminReducer.balances}},function(e){return Object(g.b)({adminEditLeaveBalances:va,handleEditBalance:ga,saveEditBalanceUser:ba},e)})(fn),gn=(a(401),a(460)),yn=je.a.Content,vn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:an.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:an.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.deleteRequestLeave=function(e,t){a.props.deleteRequestLeave(e,t)},a.state={loading:!1,visible:!1,user:null,data:a.props.leave,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-List-Pending-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leave!==this.props.leave&&this.setState({data:e.leave}),an=e.leave}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchAdminLeavePending()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request ID",dataIndex:"id",key:"id",width:100,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:200,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:200,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"),r.a.createElement(Ra.a,{type:"vertical"}),r.a.createElement(xa.a,{placement:"top",title:"Are you sure delete this leave request?",onConfirm:function(){e.deleteRequestLeave(e.props.leave,a.id),lt.a.success("Leave request has been delete!")},okText:"Yes",cancelText:"No"},r.a.createElement(Re.a,{type:"danger"},"Delete")))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(yn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:"20px",backgroundColor:"#fff",width:"1700px"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:"".concat(this.state.data&&this.state.data.length)}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Pending",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Status"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.status)),this.state.user&&""!==this.state.user.notes?r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.notes)):r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-"))))))),r.a.createElement($e,null))}}]),t}(l.Component),bn=Object(E.b)(function(e){return{loading:e.adminReducer.loading,leave:e.adminReducer.leaves}},function(e){return Object(g.b)({fetchAdminLeavePending:Ca,deleteRequestLeave:wa},e)})(vn),Dn=(a(403),je.a.Content),Cn=ke.a.Item,On=Be.a.Option,Sn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:nn.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:nn.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleOk=function(){var e=a.state.user&&a.state.user.id,t=a.state.user&&a.state.user.employee_id;a.setState({loading:!0}),a.cancelRequestLeave(a.props.leave,e,t),setTimeout(function(){a.setState({loading:!1,visible:!1})},760)},a.cancelRequestLeave=function(e,t,n){a.props.cancelRequestLeave(e,t,n)},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.downloadReport(a.state.from,a.state.to)},a.downloadReport=function(e,t){a.props.downloadReport(e,t)},a.onStartChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-");a.setState({from:l})}},a.onEndChange=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-");a.setState({to:l})}},a.handleSubmitReportType=function(e){e.preventDefault(),a.downloadReportTypeLeave(a.state.start,a.state.end,a.state.id)},a.downloadReportTypeLeave=function(e,t,n){a.props.downloadReportTypeLeave(e,t,n)},a.onStartChangeDate=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-");a.setState({start:l})}},a.onEndChangeDate=function(e){if(null!==e){var t=new Date(e._d),n=("0"+(t.getMonth()+1)).slice(-2),l=[("0"+t.getDate()).slice(-2),n,t.getFullYear()].join("-");a.setState({end:l})}},a.handleChangeSelect=function(e){a.setState({id:e})},a.state={loading:!1,visible:!1,user:null,data:a.props.leave,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:"",from:null,to:null,start:null,end:null,id:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-List-Approve-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leave!==this.props.leave&&this.setState({data:e.leave}),nn=e.leave}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchAdminLeaveApprove()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(Dn,{className:"container",style:{display:"flex",margin:"20px 15px 0",justifyContent:"center",paddingBottom:"186px"}},r.a.createElement("div",{style:{padding:"20px",backgroundColor:"#fff"}},r.a.createElement(ke.a,{id:"myForm",layout:"inline",onSubmit:this.handleSubmit,style:{marginRight:600}},r.a.createElement(Cn,null,r.a.createElement(He.a,{id:"date_from",name:"date_from",placeholder:"Start",defaultValue:this.state.from,onChange:this.onStartChange})),r.a.createElement(Cn,null,r.a.createElement(He.a,{id:"date_from",name:"date_from",placeholder:"End",defaultValue:this.state.to,onChange:this.onEndChange})),r.a.createElement(Cn,null,r.a.createElement(Re.a,{type:"primary",htmlType:"submit"},"Download"))),r.a.createElement(ke.a,{id:"myForm",layout:"inline",onSubmit:this.handleSubmitReportType,style:{marginRight:405}},r.a.createElement(Cn,null,r.a.createElement(He.a,{id:"date_from",name:"date_from",placeholder:"Start",onChange:this.onStartChangeDate})),r.a.createElement(Cn,null,r.a.createElement(He.a,{id:"date_from",name:"date_from",placeholder:"End",onChange:this.onEndChangeDate})),r.a.createElement(Cn,null,r.a.createElement(Be.a,{style:{width:180},id:"type_of_leave",name:"type_of_leave",placeholder:"Type of Leave",optionFilterProp:"children",onChange:this.handleChangeSelect},r.a.createElement(On,{value:"11"},"Annual Leave"),r.a.createElement(On,{value:"22"},"Errand Leave"),r.a.createElement(On,{value:"33"},"Sick Leave"),r.a.createElement(On,{value:"44"},"Marriage Leave"),r.a.createElement(On,{value:"55"},"Maternity Leave"),r.a.createElement(On,{value:"66"},"Other Leave"))),r.a.createElement(Cn,null,r.a.createElement(Re.a,{type:"primary",htmlType:"submit"},"Download"))),r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:"".concat(this.state.data&&this.state.data.length)}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Approved",onOk:this.handleOk,onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"accept",type:"danger",loading:n,onClick:this.handleOk},"Cancel Request")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),this.state.user&&""!==this.state.user.notes?r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.notes)):r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-"))))))),r.a.createElement($e,null))}}]),t}(l.Component),wn=Object(E.b)(function(e){return{loading:e.adminReducer.loading,leave:e.adminReducer.leaves}},function(e){return Object(g.b)({fetchAdminLeaveApprove:Oa,cancelRequestLeave:ja,downloadReport:ka,downloadReportTypeLeave:_a},e)})(Sn),jn=(a(405),je.a.Content),kn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:ln.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:ln.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leave,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Admin-List-Reject-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leave!==this.props.leave&&this.setState({data:e.leave}),ln=e.leave}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchAdminLeaveReject()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(jn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Rejected",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Reject Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reject_reason)),this.state.user&&""!==this.state.user.notes?r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.notes)):r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-"))))))),r.a.createElement($e,null))}}]),t}(l.Component),_n=Object(E.b)(function(e){return{loading:e.adminReducer.loading,leave:e.adminReducer.leaves}},function(e){return Object(g.b)({fetchAdminLeaveReject:Sa},e)})(kn),In=(a(407),je.a.Content),Rn=ke.a.Item,xn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updatePassword=function(e){e.preventDefault(),a.props.updateNewPassword(a.props.passwordForm,function(e){a.props.history.push(e)}),a.props.form.validateFieldsAndScroll(function(e,t){e||console.log("Received values of form: ",t)})},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.passwordForm,Object(ye.a)({},e.target.name,e.target.value));a.props.handleEdit(t)},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var l=a.props.form;t&&t!==l.getFieldValue("password")?n("Wrong confirm password!"):n()},a.validateToNextPassword=function(e,t,n){var l=a.props.form;t&&a.state.confirmDirty&&l.validateFields(["confirm"],{force:!0}),n()},a.state={from:null,to:null,endOpen:!1,confirmDirty:!1},a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Update-Password ----------------- "),localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&"director"!==localStorage.getItem("role")&&"admin"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:10}},style:{}},a={width:"100%"};return r.a.createElement(je.a,null,r.a.createElement(Qt,null),r.a.createElement(In,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"411px"}},r.a.createElement("div",{style:{padding:50,paddingBottom:50,paddingTop:50,background:"#fff"}},r.a.createElement("h1",null," UPDATE PASSWORD "),r.a.createElement(ke.a,{className:"login-form"},r.a.createElement(Rn,Object.assign({},t,{label:"Old Password"}),e("old password",{rules:[{required:!0},{min:7,message:"password length minimum is 7"}]})(r.a.createElement(Ie.a,{type:"password",id:"old_password",name:"old_password",placeholder:"old password",onChange:this.handleOnChange,style:a}))),r.a.createElement(Rn,Object.assign({},t,{label:"New Password"}),e("password",{rules:[{required:!0},{min:7,message:"password length minimum is 7"},{validator:this.validateToNextPassword}]})(r.a.createElement(Ie.a,{type:"password",id:"new_password",name:"new_password",placeholder:"new password",onChange:this.handleOnChange,style:a}))),r.a.createElement(Rn,Object.assign({},t,{label:"Confirm Password"}),e("confirm",{rules:[{required:!0},{min:7,message:"password length minimum is 7"},{validator:this.compareToFirstPassword}]})(r.a.createElement(Ie.a,{type:"password",id:"confirm_password",name:"confirm_password",placeholder:"confirm password",onChange:this.handleOnChange,style:a}))),r.a.createElement(Rn,null,r.a.createElement(Re.a,{onClick:this.updatePassword,htmlType:"submit",type:"primary",style:{width:"35%"}},"Update"))))),r.a.createElement($e,null))}}]),t}(l.Component),Ln=ke.a.create()(xn),Nn=Object(E.b)(function(e){return{passwordForm:e.passwordReducer}},function(e){return Object(g.b)({handleEdit:pt,updateNewPassword:ft},e)})(Ln),Tn=a(209),Fn=a.n(Tn),Yn=(a(425),a(427),je.a.Content),qn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={leaves:a.props.leave},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Director-Landing-Page ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"director"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchAdminLeaveApprove()}},{key:"componentWillReceiveProps",value:function(e){e.leave!==this.props.leave&&this.setState({leaves:e.leave})}},{key:"formatDate",value:function(e){var t=new Date(e._d),a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);return[t.getFullYear(),a,n].join("-")}},{key:"eventRender",value:function(e,t){"Sick Leave"===e.className&&t.css({"background-color":"#333333","border-color":"#333333"})}},{key:"render",value:function(){var e=[];if(this.state.leaves)for(var t=0;t<this.state.leaves.length;t++)e.push({title:"".concat(this.state.leaves[t].name," ").concat(this.state.leaves[t].total," day(s) for ").concat(this.state.leaves[t].type_name),start:this.formatDate(Ht()(this.state.leaves[t].date_from,"DD-MM-YYYY")),end:this.formatDate(Ht()(this.state.leaves[t].date_to,"DD-MM-YYYY").add(1,"d")),className:this.state.leaves[t].type_name});return this.props.loading?r.a.createElement(ia,null):r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Yn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"space-around",paddingBottom:"20px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(Fn.a,{id:"your-custom-ID",header:{left:"prev,next today myCustomButton",center:"title",right:"month,basicWeek,basicDay"},navLinks:!0,editable:!0,eventLimit:!0,events:e,eventColor:"#378006",eventClick:function(e,t,a,n){lt.a.info(e.title)}}))),r.a.createElement($e,null)))}}]),t}(l.Component),Pn=Object(E.b)(function(e){return{loading:e.adminReducer.loading,leave:e.adminReducer.leaves}},function(e){return Object(g.b)({fetchAdminLeaveApprove:Oa},e)})(qn);function Mn(){return function(e){fetch("".concat(b,"/api/director/pending"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:k,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchDirectorLeavePending: ",n)}).catch(function(e){console.error("error @fetchDirectorLeavePending: ",e)})}}function An(){return function(e){fetch("".concat(b,"/api/director/accept"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:_,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchDirectorLeaveApprove: ",n)}).catch(function(e){console.error("error @fetchDirectorLeaveApprove: ",e)})}}function Vn(){return function(e){fetch("".concat(b,"/api/director/reject/"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=t.body,n=t.error;e(function(e){return{type:I,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchDirectorLeaveReject: ",n)}).catch(function(e){console.error("error @fetchDirectorLeaveReject: ",e)})}}function Bn(e,t,a){return function(n){fetch("".concat(b,"/api/director/accept/").concat(t,"/").concat(a,"/"),{method:"PUT"}).then(function(e){return e.json()}).then(function(a){var l=a.body,r=a.error;if(null!==l){var o=e.filter(function(e){return e.id!==t}),s={loading:!1,leaves:Object(Ea.a)(o)};n(function(e){return{type:T,payload:e}}(s)),lt.a.success(l)}else lt.a.error(r)}).catch(function(e){console.error("error @directorApproveRequest: ",e)})}}function Hn(e,t,a,n){return function(l){fetch("".concat(b,"/api/director/reject/").concat(t,"/").concat(a,"/"),{method:"PUT",body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(a){var n=a.body,r=a.error;if(null!==n){var o=e.filter(function(e){return e.id!==t}),s={loading:!1,leaves:Object(Ea.a)(o)};l({type:F,payload:s}),lt.a.success(n)}else lt.a.error(r)}).catch(function(e){console.error("error @directorRejectRequest: ",e)})}}a(429);var Un,Gn,Wn,zn=je.a.Content,Jn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:Un.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Un.map(function(n){return console.log("record=========",n),String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleOk=function(){var e=a.state.user&&a.state.user.id,t=a.state.user&&a.state.user.employee_id;a.setState({loadingA:!0}),a.directorApproveRequest(a.props.leaves,e,t),setTimeout(function(){a.setState({loadingA:!1,visible:!1})},760)},a.handleReject=function(){var e=a.state.user&&a.state.user.id,t=a.state.user&&a.state.user.employee_id;a.setState({loadingR:!0}),a.directorRejectRequest(a.props.leaves,e,t,a.state.reason),setTimeout(function(){a.setState({loadingR:!1,visible:!1,visibleReject:!1})},760)},a.showReject=function(){a.setState({visibleReject:!0})},a.handleCancelReject=function(){a.setState({visibleReject:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.directorApproveRequest=function(e,t,n){a.props.directorApproveRequest(e,t,n)},a.directorRejectRequest=function(e,t,n,l){a.props.directorRejectRequest(e,t,n,l)},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.leave,Object(ye.a)({},e.target.name,e.target.value));a.setState({reason:t})},a.state={user:null,reason:null,data:a.props.leaves,loadingA:!1,loadingR:!1,visible:!1,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:"",visibleReject:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Director-List-Pending-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Un=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"director"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchDirectorLeavePending()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.visibleReject,l=t.loadingA,o=t.loadingR,s=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(zn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:s,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement("div",null,r.a.createElement(gn.a,{visible:n,title:"Reject Reason",onOk:this.handleReject,onCancel:this.handleCancelReject,style:{top:"20"},bodyStyle:{padding:"0"},footer:[r.a.createElement(Re.a,{key:"reject",type:"danger",loading:o,onClick:this.handleReject},"Reject")]},r.a.createElement(Ie.a,{type:"text",id:"reject_reason",name:"reject_reason",placeholder:"reject reason",onChange:this.handleOnChange}))),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Pending",onOk:this.handleOk,onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"accept",type:"primary",loading:l,onClick:this.handleOk},"Approve"),r.a.createElement(Re.a,{key:"reject",type:"danger",loading:o,onClick:this.showReject},"Reject")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number))))))),r.a.createElement($e,null))}}]),t}(l.Component),Kn=Object(E.b)(function(e){return{loading:e.fetchDirectorReducer.loading,leaves:e.fetchDirectorReducer.leaves}},function(e){return Object(g.b)({fetchDirectorLeavePending:Mn,directorApproveRequest:Bn,directorRejectRequest:Hn},e)})(Jn),Qn=(a(431),je.a.Content),$n=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:Gn.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Gn.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Director-List-Approve-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Gn=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"director"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchDirectorLeaveApprove()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=t.searchID,o=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:l,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Qn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:o,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Approved",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),this.state.user&&""!==this.state.user.notes?r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.notes)):r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-"))))))),r.a.createElement($e,null))}}]),t}(l.Component),Xn=Object(E.b)(function(e){return{loading:e.fetchDirectorReducer.loading,leaves:e.fetchDirectorReducer.leaves}},function(e){return Object(g.b)({fetchDirectorLeaveApprove:An},e)})($n),Zn=(a(433),je.a.Content),el=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:Wn.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Wn.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log("------------ Director-List-Reject-Request -------------------")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Wn=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"director"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchDirectorLeaveReject()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=t.searchID,o=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:l,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Zn,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:o,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Rejected",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Reject Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reject_reason)),this.state.user&&""!==this.state.user.notes?r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.notes)):r.a.createElement("tr",null,r.a.createElement("td",null,"Notes"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-"))))))),r.a.createElement($e,null))}}]),t}(l.Component),tl=Object(E.b)(function(e){return{loading:e.fetchDirectorReducer.loading,leaves:e.fetchDirectorReducer.leaves}},function(e){return Object(g.b)({fetchDirectorLeaveReject:Vn},e)})(el),al=a(156);function nl(){var e=localStorage.getItem("id");return function(t){Promise.all([fetch("".concat(b,"/api/user/summary/").concat(e),{method:"GET"}),fetch("".concat(b,"/api/user/type-leave/").concat(e),{method:"GET"})]).then(function(e){var t=Object(al.a)(e,2),a=t[0],n=t[1];return[a.json(),n.json()]}).then(function(e){var a=Object(al.a)(e,2),n=a[0],l=a[1];n.then(function(e){l.then(function(a){var n={loading:!1,userSummary:e.body,userType:a.body};t(function(e){return{type:q,payload:e}}(n))}).catch(function(e){console.error("error @userSummaryFetchData: ",e)})}).catch(function(e){console.error("error @userSummaryFetchData: ",e)})}).catch(function(e){console.error("error @userSummaryFetchData: ",e)})}}a(435);var ll=a(455),rl=a(456),ol=je.a.Content,sl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Supervisor-Landing-Page ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.userSummaryFetchData()}},{key:"render",value:function(){var e=[],t=[],a=this.props.userSummary,n=this.props.userType;if(a)for(var l=0;l<a.length;l++)e.push(r.a.createElement("p",null,a[l].type_name,": ",a[l].used," day(s)"));else e.push(r.a.createElement("p",null));for(var o in n)"Annual Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 12 days"))):"Errand Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 3 days"))):"Sick Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 30 days"))):"Marriage Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 2 days"))):"Maternity Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 90 days"))):"Other Leave"===n[o].type_name&&t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 2 days")));return this.props.loading?r.a.createElement(ia,null):r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(ol,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"547px"}},r.a.createElement("div",{style:{padding:20,width:"50%",background:"#fff"}},r.a.createElement(ll.a,null,r.a.createElement(rl.a,{span:12},r.a.createElement("div",{style:{float:"left"}},r.a.createElement("h3",null," ","Used so far",r.a.createElement("hr",{className:"id",style:{borderBottom:"1px solid black",width:"276px"}})),e)),r.a.createElement(rl.a,{span:12},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("h3",null,"Available types",r.a.createElement("hr",{className:"id",style:{borderBottom:"1px solid black",width:"276px"}})),t))))),r.a.createElement($e,null)))}}]),t}(r.a.Component),il=Object(E.b)(function(e){return{loading:e.fetchUserSummaryReducer.loading,userSummary:e.fetchUserSummaryReducer.userSummary,userType:e.fetchUserSummaryReducer.userType}},function(e){return Object(g.b)({userSummaryFetchData:nl},e)})(sl);function cl(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/supervisor/pending/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:k,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchSupervisorLeavePending: ",n)}).catch(function(e){console.error("error @fetchSupervisorLeavePending: ",e)})}}function ul(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/supervisor/accept/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:_,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchSupervisorLeaveApprove: ",n)}).catch(function(e){console.error("error @fetchSupervisorLeaveApprove: ",e)})}}function dl(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/supervisor/reject/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:I,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @fetchSupervisorLeaveReject: ",n)}).catch(function(e){console.error("error @fetchSupervisorLeaveReject: ",e)})}}function ml(e,t,a){return function(n){fetch("".concat(b,"/api/supervisor/accept/").concat(t,"/").concat(a),{method:"PUT"}).then(function(e){return e.json()}).then(function(a){var l=a.body,r=a.error;if(null!==l){var o=e.filter(function(e){return e.id!==t}),s={loading:!1,leaves:Object(Ea.a)(o)};n(function(e){return{type:T,payload:e}}(s)),lt.a.success(l)}else lt.a.error(r)}).catch(function(e){console.error("error @supervisorApproveRequest: ",e)})}}function hl(e,t,a,n){return function(l){fetch("".concat(b,"/api/supervisor/reject/").concat(t,"/").concat(a),{method:"PUT",body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(a){var n=a.body,r=a.error;if(null!==n){var o=e.filter(function(e){return e.id!==t}),s={loading:!1,leaves:Object(Ea.a)(o)};l({type:F,payload:s}),lt.a.success(n)}else lt.a.error(r)}).catch(function(e){console.error("error @supervisorRejectRequest: ",e)})}}a(437);var pl,fl,El,gl=je.a.Content,yl=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:pl.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:pl.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.showReject=function(){a.setState({visibleReject:!0})},a.handleOk=function(){var e=a.state.user&&a.state.user.id,t=a.state.user&&a.state.user.employee_id;a.setState({loadingA:!0}),a.supervisorApproveRequest(a.props.leaves,e,t),setTimeout(function(){a.setState({loadingA:!1,visible:!1})},760)},a.supervisorApproveRequest=function(e,t,n){a.props.supervisorApproveRequest(e,t,n)},a.handleReject=function(){var e=a.state.user&&a.state.user.id,t=a.state.user&&a.state.user.employee_id;a.setState({loadingR:!0}),a.supervisorRejectRequest(a.props.leaves,e,t,a.state.reason),setTimeout(function(){a.setState({loadingR:!1,visible:!1,visibleReject:!1})},760)},a.handleOnChange=function(e){var t=Object(v.a)({},a.props.leave,Object(ye.a)({},e.target.name,e.target.value));a.setState({reason:t})},a.supervisorRejectRequest=function(e,t,n,l){a.props.supervisorRejectRequest(e,t,n,l)},a.handleCancelReject=function(){a.setState({visibleReject:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.state={loadingA:!1,loadingR:!1,visible:!1,visibleReject:!1,user:null,reason:null,data:a.props.leaves,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a.handleReject=a.handleReject.bind(Object(ve.a)(Object(ve.a)(a))),a.handleOnChange=a.handleOnChange.bind(Object(ve.a)(Object(ve.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Supervisor-List-Pending-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),pl=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchSupervisorLeavePending()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.visibleReject,l=t.loadingA,o=t.loadingR,s=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(gl,{className:"container",style:{display:"flex",margin:"20px 10px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:s,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement("div",null,r.a.createElement(gn.a,{visible:n,title:"Reject Reason",onOk:this.handleReject,onCancel:this.handleCancelReject,style:{top:"20"},bodyStyle:{padding:"0"},footer:[r.a.createElement(Re.a,{key:"reject",type:"danger",loading:o,onClick:this.handleReject},"Reject")]},r.a.createElement(Ie.a,{type:"text",id:"reject_reason",name:"reject_reason",placeholder:"reject reason",onChange:this.handleOnChange}))),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Pending",onOk:this.handleOk,onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"accept",type:"primary",loading:l,onClick:this.handleOk},"Approve"),r.a.createElement(Re.a,{type:"danger",onClick:this.showReject},"Reject")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number))))))),r.a.createElement($e,null))}}]),t}(l.Component),vl=Object(E.b)(function(e){return{loading:e.fetchSupervisorReducer.loading,leaves:e.fetchSupervisorReducer.leaves,leave:e.fetchSupervisorReducer.leave}},function(e){return Object(g.b)({fetchSupervisorLeavePending:cl,supervisorApproveRequest:ml,supervisorRejectRequest:hl},e)})(yl),bl=(a(439),je.a.Content),Dl=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:fl.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:fl.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Supervisor-List-Approve-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),fl=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchSupervisorLeaveApprove()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(bl,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"space-around",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Approved",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Status"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.status))))))),r.a.createElement($e,null))}}]),t}(l.Component),Cl=Object(E.b)(function(e){return{loading:e.fetchSupervisorReducer.loading,leaves:e.fetchSupervisorReducer.leaves}},function(e){return Object(g.b)({fetchSupervisorLeaveApprove:ul},e)})(Dl),Ol=(a(441),je.a.Content),Sl=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearch=function(){var e=a.state.searchText,t=new RegExp(e,"gi");a.setState({filterDropdownNameVisible:!1,filtered:!!e,data:El.map(function(a){return a.name.match(t)?Object(v.a)({},a,{name:r.a.createElement("span",null,a.name.split(new RegExp("(?<=".concat(e,")|(?=").concat(e,")"),"i")).map(function(t,a){return t.toLowerCase()===e.toLowerCase()?r.a.createElement("span",{key:a},t):t}))}):null}).filter(function(e){return!!e})})},a.onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:El.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.onInputChangeName=function(e){a.setState({searchText:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filterDropdownNameVisible:!1,filtered:!1,searchText:"",searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Supervisor-List-Reject-Request ----------------- ")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),El=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.fetchSupervisorLeaveReject()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-name"},r.a.createElement(Ie.a,{ref:function(t){return e.searchInput=t},placeholder:"Search name",value:this.state.searchText,onChange:this.onInputChangeName,onPressEnter:this.onSearch}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearch},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownNameVisible:this.state.filterDropdownNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownNameVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Ol,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Rejected",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Reject Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reject_reason))))))),r.a.createElement($e,null))}}]),t}(l.Component),wl=Object(E.b)(function(e){return{loading:e.fetchSupervisorReducer.loading,leaves:e.fetchSupervisorReducer.leaves}},function(e){return Object(g.b)({fetchSupervisorLeaveReject:dl},e)})(Sl),jl=(a(443),je.a.Content),kl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log(" ----------------- Employee-Landing-Page ----------------- ")}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.userSummaryFetchData()}},{key:"render",value:function(){var e=[],t=[],a=this.props.userSummary,n=this.props.userType;if(a)for(var l=0;l<a.length;l++)e.push(r.a.createElement("p",null,a[l].type_name,": ",a[l].used," day(s)"));else e.push(r.a.createElement("p",null));for(var o in n)"Annual Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 12 days"))):"Errand Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 3 days"))):"Sick Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 30 days"))):"Marriage Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 2 days")," ")):"Maternity Leave"===n[o].type_name?t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 90 days"))):"Other Leave"===n[o].type_name&&t.push(r.a.createElement("p",null,"".concat(n[o].type_name," : ").concat(n[o].leave_remaining," days of 2 days")));return this.props.loading?r.a.createElement(ia,null):r.a.createElement("div",null,r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(jl,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"space-around",paddingBottom:"542px"}},r.a.createElement("div",{style:{padding:40,width:"50%",background:"#fff"}},r.a.createElement(ll.a,null,r.a.createElement(rl.a,{span:12},r.a.createElement("div",{style:{float:"left"}},r.a.createElement("h3",null," ","Used so far",r.a.createElement("hr",{className:"id",style:{borderBottom:"1px solid black",width:"276px"}})),e)),r.a.createElement(rl.a,{span:12},r.a.createElement("div",{style:{float:"right"}},r.a.createElement("h3",null,"Available types",r.a.createElement("hr",{className:"id",style:{borderBottom:"1px solid black",width:"276px"}})),t))))),r.a.createElement($e,null)))}}]),t}(r.a.Component),_l=Object(E.b)(function(e){return{userSummary:e.fetchUserSummaryReducer.userSummary,loading:e.fetchUserSummaryReducer.loading,userType:e.fetchUserSummaryReducer.userType}},function(e){return Object(g.b)({userSummaryFetchData:nl},e)})(kl);function Il(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/employee/pending/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:R,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @employeeGetRequestPending: ",n)}).catch(function(e){console.error("error @employeeGetRequestPending: ",e)})}}function Rl(e,t){return function(a){fetch("".concat(b,"/api/employee/leave/").concat(t),{method:"DELETE"}).then(function(e){return e.json()}).then(function(n){n.body;var l=n.error,r=e.filter(function(e){return e.id!==t}),o={loading:!1,leaves:Object(Ea.a)(r)};a(function(e){return{type:x,payload:e}}(o)),null!==l&&console.error("error not null @employeeDeleteRequest: ",l)}).catch(function(e){console.error("error @employeeDeleteRequest: ",e)})}}function xl(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/employee/accept/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:L,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @employeeGetRequestApprove: ",n)}).catch(function(e){console.error("error @employeeGetRequestApprove: ",e)})}}function Ll(){var e=localStorage.getItem("id");return function(t){fetch("".concat(b,"/api/employee/reject/").concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(e){var a=e.body,n=e.error;t(function(e){return{type:N,payload:e}}({loading:!1,leaves:a})),null!==n&&console.error("error not null @employeeGetRequestReject: ",n)}).catch(function(e){console.error("error @employeeGetRequestReject: ",e)})}}a(445);var Nl,Tl,Fl,Yl=je.a.Content,ql=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Nl.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.editLeave=function(e,t){a.props.history.push({pathname:"/editrequest/"+t,state:{leave:e}})},a.employeeDeleteRequest=function(e,t){a.props.employeeDeleteRequest(e,t)},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filtered:!1,searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log("------------ Employee-List-Pending-Request -------------------")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Nl=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.employeeGetRequestPending()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:300,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"),r.a.createElement(Ra.a,{type:"vertical"}),r.a.createElement(xa.a,{placement:"top",title:"Are you sure delete this leave request?",onConfirm:function(){e.employeeDeleteRequest(e.props.leaves,a.id),lt.a.success("Leave request has been delete!")},okText:"Yes",cancelText:"No"},r.a.createElement(Re.a,{type:"danger"},"Delete")))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Yl,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Pending",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Status"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.status))))))),r.a.createElement($e,null))}}]),t}(l.Component),Pl=Object(E.b)(function(e){return{loading:e.fetchEmployeeReducer.loading,leaves:e.fetchEmployeeReducer.leaves}},function(e){return Object(g.b)({employeeGetRequestPending:Il,employeeDeleteRequest:Rl},e)})(ql),Ml=(a(447),je.a.Content),Al=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Tl.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filtered:!1,searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log("------------ Employee-List-Approve-Request -------------------")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Tl=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.employeeGetRequestApprove()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Ml,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Approved",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Status"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.status))))))),r.a.createElement($e,null))}}]),t}(l.Component),Vl=Object(E.b)(function(e){return{loading:e.fetchEmployeeReducer.loading,leaves:e.fetchEmployeeReducer.leaves}},function(e){return Object(g.b)({employeeGetRequestApprove:xl},e)})(Al),Bl=(a(449),je.a.Content),Hl=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSearchID=function(){var e=a.state.searchID,t=new RegExp(e,"gi");a.setState({filterDropdownIDVisible:!1,filtered:!!e,data:Fl.map(function(n){return String(n.id).match(t)?Object(v.a)({},n,{ID:r.a.createElement("span",null,a.state.data.map(function(t,a){return String(t.id)===e?r.a.createElement("span",{key:a,className:"highlight"},t):t}),"}")}):null}).filter(function(e){return!!e})})},a.onInputChangeID=function(e){a.setState({searchID:e.target.value})},a.showDetail=function(e){a.setState({visible:!0,user:e})},a.employeeDeleteRequest=function(e,t){a.props.employeeDeleteRequest(e,t)},a.onSelectChange=function(e){console.log("selected row: ",e)},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!1,visible:!1,user:null,data:a.props.leaves,filterDropdownVisible:!1,filtered:!1,searchID:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){console.log("------------ Employee-List-Reject-Request -------------------")}},{key:"componentWillReceiveProps",value:function(e){e.leaves!==this.props.leaves&&this.setState({data:e.leaves}),Fl=e.leaves}},{key:"componentDidMount",value:function(){localStorage.getItem("token")?"employee"!==localStorage.getItem("role")&&"supervisor"!==localStorage.getItem("role")&&this.props.history.push("/"):this.props.history.push("/"),this.props.employeeGetRequestReject()}},{key:"onShowSizeChange",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,l=[{title:"Request No.",dataIndex:"id",key:"id",width:90,filterDropdown:r.a.createElement("div",{className:"custom-filter-dropdown-id"},r.a.createElement(Ie.a,{type:"number",ref:function(t){return e.searchInput=t},placeholder:"Search request id",value:this.state.searchID,onChange:this.onInputChangeID,onPressEnter:this.onSearchID}),r.a.createElement(Re.a,{type:"primary",onClick:this.onSearchID},"Search")),filterIcon:r.a.createElement(_e.a,{type:"search",style:{color:this.state.filtered?"#108ee9":"#aaa"}}),filterDropdownIDVisible:this.state.filterDropdownIDVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownIDVisible:t},function(){return e.searchInput&&e.searchInput.focus()})}},{title:"Employee ID",dataIndex:"employee_number",key:"employee_number",width:100},{title:"Name",dataIndex:"name",key:"name",width:150},{title:"Position",dataIndex:"position",key:"position",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Type Of Leave",dataIndex:"type_name",key:"type_name",width:150},{title:"From",dataIndex:"date_from",key:"date_from",width:120},{title:"To",dataIndex:"date_to",key:"date_to",width:120},{title:"Action",key:"action",width:200,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(Re.a,{type:"primary",onClick:function(){return e.showDetail(a)}},"Detail"),r.a.createElement(Ra.a,{type:"vertical"}),r.a.createElement(xa.a,{placement:"top",title:"Are you sure delete this leave request?",onConfirm:function(){e.employeeDeleteRequest(e.props.leaves,a.id),lt.a.success("Leave request has been delete!")},okText:"Yes",cancelText:"No"},r.a.createElement(Re.a,{type:"danger"},"Delete")))}}];return this.props.loading?r.a.createElement(ia,null):r.a.createElement(je.a,null,r.a.createElement(Ke,null),r.a.createElement(Bl,{className:"container",style:{display:"flex",margin:"20px 16px 0",justifyContent:"center",paddingBottom:"606px"}},r.a.createElement("div",{style:{padding:20,background:"#fff"}},r.a.createElement(La.a,{columns:l,dataSource:this.state.data,rowKey:function(e){return e.id},onRowClick:this.onSelectChange,pagination:{className:"my-pagination",defaultCurrent:1,defaultPageSize:5,total:50,showSizeChanger:this.onShowSizeChange}})),r.a.createElement(gn.a,{visible:a,title:"Detail Leave Request Rejected",onCancel:this.handleCancel,style:{top:"20"},bodyStyle:{padding:"0"},width:"600px",footer:[r.a.createElement(Re.a,{key:"cancel",loading:n,onClick:this.handleCancel},"Return")]},r.a.createElement("div",{style:{padding:10,background:"#fff"}},r.a.createElement("table",null,r.a.createElement("thead",null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gender"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.gender)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Type Of Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.type_name)),this.state.user&&""!==this.state.user.reason?r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reason)):r.a.createElement("tr",null,r.a.createElement("td",null,"Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_from)),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.date_to)),this.state.user&&"{}"!==this.state.user.half_dates?r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.half_dates.substring(1,this.state.user.half_dates.length-1))):r.a.createElement("tr",null,r.a.createElement("td",null,"Half Day"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0-")),r.a.createElement("tr",null,r.a.createElement("td",null,"Back On"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.back_on)),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Leave"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.total," day(s)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Leave Balance"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.leave_remaining," days")),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Address"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_address)),r.a.createElement("tr",null,r.a.createElement("td",null,"Contact Number"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.contact_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Reject Reason"),r.a.createElement("td",null,"\xa0:"),r.a.createElement("td",null,"\xa0",this.state.user&&this.state.user.reject_reason))))))),r.a.createElement($e,null))}}]),t}(l.Component),Ul=Object(E.b)(function(e){return{loading:e.fetchEmployeeReducer.loading,leaves:e.fetchEmployeeReducer.leaves}},function(e){return Object(g.b)({employeeGetRequestReject:Ll,employeeDeleteRequest:Rl},e)})(Hl),Gl=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{store:Ee},r.a.createElement("div",{className:"App"},r.a.createElement(h.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:qe}),r.a.createElement(f.a,{exact:!0,path:"/login",component:qe}),r.a.createElement(f.a,{exact:!0,path:"/reset-password",component:ht}),r.a.createElement(f.a,{exact:!0,path:"/admin",component:Ya}),r.a.createElement(f.a,{exact:!0,path:"/admin/register-user",component:Xa}),r.a.createElement(f.a,{exact:!0,path:"/admin/edit-user/:id",component:dn}),r.a.createElement(f.a,{exact:!0,path:"/admin/edit-balance/:id",component:En}),r.a.createElement(f.a,{exact:!0,path:"/admin/list-pending-request",component:bn}),r.a.createElement(f.a,{exact:!0,path:"/admin/list-approve-request",component:wn}),r.a.createElement(f.a,{exact:!0,path:"/admin/list-reject-request",component:_n}),r.a.createElement(f.a,{path:"/admin/edit-password",component:Nn}),r.a.createElement(f.a,{exact:!0,path:"/employee",component:_l}),r.a.createElement(f.a,{exact:!0,path:"/profile",component:nt}),r.a.createElement(f.a,{path:"/profile/:id",component:bt}),r.a.createElement(f.a,{exact:!0,path:"/employee/leave-request",component:Vt}),r.a.createElement(f.a,{exact:!0,path:"/admin/leave-request",component:na}),r.a.createElement(f.a,{exact:!0,path:"/editrequest/:id",component:fa}),r.a.createElement(f.a,{exact:!0,path:"/employee/list-pending-request",component:Pl}),r.a.createElement(f.a,{exact:!0,path:"/employee/list-approve-request",component:Vl}),r.a.createElement(f.a,{exact:!0,path:"/employee/list-reject-request",component:Ul}),r.a.createElement(f.a,{exact:!0,path:"/supervisor",component:il}),r.a.createElement(f.a,{exact:!0,path:"/supervisor/list-pending-request",component:vl}),r.a.createElement(f.a,{exact:!0,path:"/supervisor/list-approve-request",component:Cl}),r.a.createElement(f.a,{exact:!0,path:"/supervisor/list-reject-request",component:wl}),r.a.createElement(f.a,{exact:!0,path:"/director",component:Pn}),r.a.createElement(f.a,{exact:!0,path:"/director/list-pending-request",component:Kn}),r.a.createElement(f.a,{exact:!0,path:"/director/list-approve-request",component:Xn}),r.a.createElement(f.a,{exact:!0,path:"/director/list-reject-request",component:tl}),r.a.createElement(f.a,{component:ge})))))}}]),t}(l.Component),Wl=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zl(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(Gl,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Wl?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):zl(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):zl(e)})}}()}},[[212,2,1]]]);
//# sourceMappingURL=main.d408a29e.chunk.js.map